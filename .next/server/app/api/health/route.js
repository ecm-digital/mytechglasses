"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/health/route";
exports.ids = ["app/api/health/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhealth%2Froute&page=%2Fapi%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhealth%2Froute.ts&appDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhealth%2Froute&page=%2Fapi%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhealth%2Froute.ts&appDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_tomaszgt_Mytechglasses_my_tech_glasses_src_app_api_health_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/health/route.ts */ \"(rsc)/./src/app/api/health/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/health/route\",\n        pathname: \"/api/health\",\n        filename: \"route\",\n        bundlePath: \"app/api/health/route\"\n    },\n    resolvedPagePath: \"/Users/tomaszgt/Mytechglasses/my-tech-glasses/src/app/api/health/route.ts\",\n    nextConfigOutput,\n    userland: _Users_tomaszgt_Mytechglasses_my_tech_glasses_src_app_api_health_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/health/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZoZWFsdGglMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmhlYWx0aCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmhlYWx0aCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRvbWFzemd0JTJGTXl0ZWNoZ2xhc3NlcyUyRm15LXRlY2gtZ2xhc3NlcyUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ0b21hc3pndCUyRk15dGVjaGdsYXNzZXMlMkZteS10ZWNoLWdsYXNzZXMmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdGVjaC1nbGFzc2VzLz82M2Y1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy90b21hc3pndC9NeXRlY2hnbGFzc2VzL215LXRlY2gtZ2xhc3Nlcy9zcmMvYXBwL2FwaS9oZWFsdGgvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2hlYWx0aC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2hlYWx0aFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvaGVhbHRoL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3RvbWFzemd0L015dGVjaGdsYXNzZXMvbXktdGVjaC1nbGFzc2VzL3NyYy9hcHAvYXBpL2hlYWx0aC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaGVhbHRoL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhealth%2Froute&page=%2Fapi%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhealth%2Froute.ts&appDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/health/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/health/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/stripe */ \"(rsc)/./src/lib/stripe.ts\");\n/* harmony import */ var _lib_environment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/environment */ \"(rsc)/./src/lib/environment.ts\");\n/* harmony import */ var _lib_monitoring__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/monitoring */ \"(rsc)/./src/lib/monitoring.ts\");\n\n\n\n\nasync function GET() {\n    const startTime = performance.now();\n    try {\n        const config = (0,_lib_environment__WEBPACK_IMPORTED_MODULE_2__.getConfig)();\n        // Check environment configuration\n        const envValidation = (0,_lib_environment__WEBPACK_IMPORTED_MODULE_2__.validateEnvironmentConfig)();\n        // Test Stripe connection\n        let stripeStatus = \"healthy\";\n        let stripeError = null;\n        let stripeResponseTime = 0;\n        try {\n            const stripeStart = performance.now();\n            const stripe = (0,_lib_stripe__WEBPACK_IMPORTED_MODULE_1__.getStripeServer)();\n            // Simple test - retrieve account info with timeout\n            const timeoutPromise = new Promise((_, reject)=>setTimeout(()=>reject(new Error(\"Stripe connection timeout\")), 5000));\n            await Promise.race([\n                stripe.accounts.retrieve(),\n                timeoutPromise\n            ]);\n            stripeResponseTime = performance.now() - stripeStart;\n            // Mark as degraded if response time is high\n            if (stripeResponseTime > 3000) {\n                stripeStatus = \"degraded\";\n            }\n        } catch (error) {\n            stripeStatus = \"unhealthy\";\n            stripeError = error instanceof Error ? error.message : \"Unknown Stripe error\";\n            stripeResponseTime = performance.now() - startTime;\n        }\n        // Test database/storage connectivity (if applicable)\n        let storageStatus = \"healthy\";\n        let storageError = null;\n        try {\n            // Test localStorage availability\n            if (typeof localStorage !== \"undefined\") {\n                localStorage.setItem(\"health-check\", \"test\");\n                localStorage.removeItem(\"health-check\");\n            }\n        } catch (error) {\n            storageStatus = \"unhealthy\";\n            storageError = \"localStorage not available\";\n        }\n        // Calculate overall response time\n        const totalResponseTime = performance.now() - startTime;\n        // Record health checks\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_3__.recordHealth)({\n            service: \"stripe\",\n            status: stripeStatus,\n            responseTime: stripeResponseTime,\n            error: stripeError\n        });\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_3__.recordHealth)({\n            service: \"storage\",\n            status: storageStatus,\n            error: storageError\n        });\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_3__.recordHealth)({\n            service: \"api\",\n            status: \"healthy\",\n            responseTime: totalResponseTime\n        });\n        // Get system health summary\n        const systemHealth = _lib_monitoring__WEBPACK_IMPORTED_MODULE_3__.healthMonitor.getSystemHealth();\n        const healthData = {\n            status: systemHealth.status,\n            timestamp: new Date().toISOString(),\n            environment: {\n                mode: config.environment,\n                stripeMode: config.stripeMode,\n                version: process.env.npm_package_version || \"1.0.0\"\n            },\n            checks: {\n                environment: envValidation.isValid ? \"healthy\" : \"unhealthy\",\n                stripe: stripeStatus,\n                storage: storageStatus,\n                api: \"healthy\"\n            },\n            performance: {\n                responseTime: Math.round(totalResponseTime),\n                stripeResponseTime: Math.round(stripeResponseTime)\n            },\n            details: {\n                environment: envValidation.isValid ? null : envValidation.errors,\n                stripe: stripeError,\n                storage: storageError,\n                uptime: process.uptime ? Math.round(process.uptime()) : null\n            },\n            ...config.isDevelopment && {\n                debug: {\n                    nodeVersion: process.version,\n                    platform: process.platform,\n                    memory: process.memoryUsage ? process.memoryUsage() : null,\n                    systemHealth: systemHealth\n                }\n            }\n        };\n        // Return appropriate status code\n        const isHealthy = systemHealth.status === \"healthy\" && envValidation.isValid;\n        const isDegraded = systemHealth.status === \"degraded\";\n        let status = 200;\n        if (!isHealthy) {\n            status = isDegraded ? 200 : 503 // 200 for degraded, 503 for unhealthy\n            ;\n        }\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(healthData, {\n            status\n        });\n        // Add cache headers\n        response.headers.set(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n        response.headers.set(\"Pragma\", \"no-cache\");\n        response.headers.set(\"Expires\", \"0\");\n        // Add health check headers\n        response.headers.set(\"X-Health-Status\", systemHealth.status);\n        response.headers.set(\"X-Response-Time\", Math.round(totalResponseTime).toString());\n        return response;\n    } catch (error) {\n        const errorResponseTime = performance.now() - startTime;\n        // Record unhealthy API status\n        (0,_lib_monitoring__WEBPACK_IMPORTED_MODULE_3__.recordHealth)({\n            service: \"api\",\n            status: \"unhealthy\",\n            responseTime: errorResponseTime,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        });\n        const errorResponse = {\n            status: \"unhealthy\",\n            timestamp: new Date().toISOString(),\n            error: error instanceof Error ? error.message : \"Unknown error\",\n            performance: {\n                responseTime: Math.round(errorResponseTime)\n            }\n        };\n        const response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(errorResponse, {\n            status: 503\n        });\n        response.headers.set(\"Cache-Control\", \"no-cache, no-store, must-revalidate\");\n        response.headers.set(\"X-Health-Status\", \"unhealthy\");\n        response.headers.set(\"X-Response-Time\", Math.round(errorResponseTime).toString());\n        return response;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlDLE9BQU9DLFdBQVc7WUFDakNoQixPQUFPQSxpQkFBaUJKLFFBQVFJLE1BQU1DLE9BQU8sR0FBRztZQUNoRG5CLGFBQWE7Z0JBQ1g0QixjQUFja0IsS0FBS0MsS0FBSyxDQUFDaUI7WUFDM0I7UUFDRjtRQUVBLE1BQU1MLFdBQVduRSxxREFBWUEsQ0FBQ29FLElBQUksQ0FBQ0ssZUFBZTtZQUFFdEMsUUFBUTtRQUFJO1FBRWhFZ0MsU0FBU0UsT0FBTyxDQUFDQyxHQUFHLENBQUMsaUJBQWlCO1FBQ3RDSCxTQUFTRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxtQkFBbUI7UUFDeENILFNBQVNFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLG1CQUFtQmhCLEtBQUtDLEtBQUssQ0FBQ2lCLG1CQUFtQkQsUUFBUTtRQUU5RSxPQUFPSjtJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS10ZWNoLWdsYXNzZXMvLi9zcmMvYXBwL2FwaS9oZWFsdGgvcm91dGUudHM/ZmM5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IGdldFN0cmlwZVNlcnZlciB9IGZyb20gJ0AvbGliL3N0cmlwZSdcbmltcG9ydCB7IHZhbGlkYXRlRW52aXJvbm1lbnRDb25maWcsIGdldENvbmZpZyB9IGZyb20gJ0AvbGliL2Vudmlyb25tZW50J1xuaW1wb3J0IHsgcmVjb3JkSGVhbHRoLCBoZWFsdGhNb25pdG9yIH0gZnJvbSAnQC9saWIvbW9uaXRvcmluZydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KClcbiAgXG4gIHRyeSB7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKClcbiAgICBcbiAgICAvLyBDaGVjayBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uXG4gICAgY29uc3QgZW52VmFsaWRhdGlvbiA9IHZhbGlkYXRlRW52aXJvbm1lbnRDb25maWcoKVxuICAgIFxuICAgIC8vIFRlc3QgU3RyaXBlIGNvbm5lY3Rpb25cbiAgICBsZXQgc3RyaXBlU3RhdHVzOiAnaGVhbHRoeScgfCAndW5oZWFsdGh5JyB8ICdkZWdyYWRlZCcgPSAnaGVhbHRoeSdcbiAgICBsZXQgc3RyaXBlRXJyb3I6IHN0cmluZyB8IG51bGwgPSBudWxsXG4gICAgbGV0IHN0cmlwZVJlc3BvbnNlVGltZSA9IDBcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RyaXBlU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKVxuICAgICAgY29uc3Qgc3RyaXBlID0gZ2V0U3RyaXBlU2VydmVyKClcbiAgICAgIFxuICAgICAgLy8gU2ltcGxlIHRlc3QgLSByZXRyaWV2ZSBhY2NvdW50IGluZm8gd2l0aCB0aW1lb3V0XG4gICAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IFxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoJ1N0cmlwZSBjb25uZWN0aW9uIHRpbWVvdXQnKSksIDUwMDApXG4gICAgICApXG4gICAgICBcbiAgICAgIGF3YWl0IFByb21pc2UucmFjZShbXG4gICAgICAgIHN0cmlwZS5hY2NvdW50cy5yZXRyaWV2ZSgpLFxuICAgICAgICB0aW1lb3V0UHJvbWlzZVxuICAgICAgXSlcbiAgICAgIFxuICAgICAgc3RyaXBlUmVzcG9uc2VUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdHJpcGVTdGFydFxuICAgICAgXG4gICAgICAvLyBNYXJrIGFzIGRlZ3JhZGVkIGlmIHJlc3BvbnNlIHRpbWUgaXMgaGlnaFxuICAgICAgaWYgKHN0cmlwZVJlc3BvbnNlVGltZSA+IDMwMDApIHtcbiAgICAgICAgc3RyaXBlU3RhdHVzID0gJ2RlZ3JhZGVkJ1xuICAgICAgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHN0cmlwZVN0YXR1cyA9ICd1bmhlYWx0aHknXG4gICAgICBzdHJpcGVFcnJvciA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gU3RyaXBlIGVycm9yJ1xuICAgICAgc3RyaXBlUmVzcG9uc2VUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWVcbiAgICB9XG4gICAgXG4gICAgLy8gVGVzdCBkYXRhYmFzZS9zdG9yYWdlIGNvbm5lY3Rpdml0eSAoaWYgYXBwbGljYWJsZSlcbiAgICBsZXQgc3RvcmFnZVN0YXR1czogJ2hlYWx0aHknIHwgJ3VuaGVhbHRoeScgPSAnaGVhbHRoeSdcbiAgICBsZXQgc3RvcmFnZUVycm9yOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBUZXN0IGxvY2FsU3RvcmFnZSBhdmFpbGFiaWxpdHlcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGVhbHRoLWNoZWNrJywgJ3Rlc3QnKVxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaGVhbHRoLWNoZWNrJylcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgc3RvcmFnZVN0YXR1cyA9ICd1bmhlYWx0aHknXG4gICAgICBzdG9yYWdlRXJyb3IgPSAnbG9jYWxTdG9yYWdlIG5vdCBhdmFpbGFibGUnXG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGF0ZSBvdmVyYWxsIHJlc3BvbnNlIHRpbWVcbiAgICBjb25zdCB0b3RhbFJlc3BvbnNlVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lXG4gICAgXG4gICAgLy8gUmVjb3JkIGhlYWx0aCBjaGVja3NcbiAgICByZWNvcmRIZWFsdGgoe1xuICAgICAgc2VydmljZTogJ3N0cmlwZScsXG4gICAgICBzdGF0dXM6IHN0cmlwZVN0YXR1cyxcbiAgICAgIHJlc3BvbnNlVGltZTogc3RyaXBlUmVzcG9uc2VUaW1lLFxuICAgICAgZXJyb3I6IHN0cmlwZUVycm9yXG4gICAgfSlcbiAgICBcbiAgICByZWNvcmRIZWFsdGgoe1xuICAgICAgc2VydmljZTogJ3N0b3JhZ2UnLFxuICAgICAgc3RhdHVzOiBzdG9yYWdlU3RhdHVzLFxuICAgICAgZXJyb3I6IHN0b3JhZ2VFcnJvclxuICAgIH0pXG4gICAgXG4gICAgcmVjb3JkSGVhbHRoKHtcbiAgICAgIHNlcnZpY2U6ICdhcGknLFxuICAgICAgc3RhdHVzOiAnaGVhbHRoeScsXG4gICAgICByZXNwb25zZVRpbWU6IHRvdGFsUmVzcG9uc2VUaW1lXG4gICAgfSlcbiAgICBcbiAgICAvLyBHZXQgc3lzdGVtIGhlYWx0aCBzdW1tYXJ5XG4gICAgY29uc3Qgc3lzdGVtSGVhbHRoID0gaGVhbHRoTW9uaXRvci5nZXRTeXN0ZW1IZWFsdGgoKVxuICAgIFxuICAgIGNvbnN0IGhlYWx0aERhdGEgPSB7XG4gICAgICBzdGF0dXM6IHN5c3RlbUhlYWx0aC5zdGF0dXMsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIGVudmlyb25tZW50OiB7XG4gICAgICAgIG1vZGU6IGNvbmZpZy5lbnZpcm9ubWVudCxcbiAgICAgICAgc3RyaXBlTW9kZTogY29uZmlnLnN0cmlwZU1vZGUsXG4gICAgICAgIHZlcnNpb246IHByb2Nlc3MuZW52Lm5wbV9wYWNrYWdlX3ZlcnNpb24gfHwgJzEuMC4wJ1xuICAgICAgfSxcbiAgICAgIGNoZWNrczoge1xuICAgICAgICBlbnZpcm9ubWVudDogZW52VmFsaWRhdGlvbi5pc1ZhbGlkID8gJ2hlYWx0aHknIDogJ3VuaGVhbHRoeScsXG4gICAgICAgIHN0cmlwZTogc3RyaXBlU3RhdHVzLFxuICAgICAgICBzdG9yYWdlOiBzdG9yYWdlU3RhdHVzLFxuICAgICAgICBhcGk6ICdoZWFsdGh5J1xuICAgICAgfSxcbiAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgIHJlc3BvbnNlVGltZTogTWF0aC5yb3VuZCh0b3RhbFJlc3BvbnNlVGltZSksXG4gICAgICAgIHN0cmlwZVJlc3BvbnNlVGltZTogTWF0aC5yb3VuZChzdHJpcGVSZXNwb25zZVRpbWUpXG4gICAgICB9LFxuICAgICAgZGV0YWlsczoge1xuICAgICAgICBlbnZpcm9ubWVudDogZW52VmFsaWRhdGlvbi5pc1ZhbGlkID8gbnVsbCA6IGVudlZhbGlkYXRpb24uZXJyb3JzLFxuICAgICAgICBzdHJpcGU6IHN0cmlwZUVycm9yLFxuICAgICAgICBzdG9yYWdlOiBzdG9yYWdlRXJyb3IsXG4gICAgICAgIHVwdGltZTogcHJvY2Vzcy51cHRpbWUgPyBNYXRoLnJvdW5kKHByb2Nlc3MudXB0aW1lKCkpIDogbnVsbFxuICAgICAgfSxcbiAgICAgIC4uLihjb25maWcuaXNEZXZlbG9wbWVudCAmJiB7XG4gICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgbm9kZVZlcnNpb246IHByb2Nlc3MudmVyc2lvbixcbiAgICAgICAgICBwbGF0Zm9ybTogcHJvY2Vzcy5wbGF0Zm9ybSxcbiAgICAgICAgICBtZW1vcnk6IHByb2Nlc3MubWVtb3J5VXNhZ2UgPyBwcm9jZXNzLm1lbW9yeVVzYWdlKCkgOiBudWxsLFxuICAgICAgICAgIHN5c3RlbUhlYWx0aDogc3lzdGVtSGVhbHRoXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICAgIFxuICAgIC8vIFJldHVybiBhcHByb3ByaWF0ZSBzdGF0dXMgY29kZVxuICAgIGNvbnN0IGlzSGVhbHRoeSA9IHN5c3RlbUhlYWx0aC5zdGF0dXMgPT09ICdoZWFsdGh5JyAmJiBlbnZWYWxpZGF0aW9uLmlzVmFsaWRcbiAgICBjb25zdCBpc0RlZ3JhZGVkID0gc3lzdGVtSGVhbHRoLnN0YXR1cyA9PT0gJ2RlZ3JhZGVkJ1xuICAgIFxuICAgIGxldCBzdGF0dXMgPSAyMDBcbiAgICBpZiAoIWlzSGVhbHRoeSkge1xuICAgICAgc3RhdHVzID0gaXNEZWdyYWRlZCA/IDIwMCA6IDUwMyAvLyAyMDAgZm9yIGRlZ3JhZGVkLCA1MDMgZm9yIHVuaGVhbHRoeVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKGhlYWx0aERhdGEsIHsgc3RhdHVzIH0pXG4gICAgXG4gICAgLy8gQWRkIGNhY2hlIGhlYWRlcnNcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsICduby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZScpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1ByYWdtYScsICduby1jYWNoZScpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0V4cGlyZXMnLCAnMCcpXG4gICAgXG4gICAgLy8gQWRkIGhlYWx0aCBjaGVjayBoZWFkZXJzXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtSGVhbHRoLVN0YXR1cycsIHN5c3RlbUhlYWx0aC5zdGF0dXMpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtUmVzcG9uc2UtVGltZScsIE1hdGgucm91bmQodG90YWxSZXNwb25zZVRpbWUpLnRvU3RyaW5nKCkpXG4gICAgXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgZXJyb3JSZXNwb25zZVRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZVxuICAgIFxuICAgIC8vIFJlY29yZCB1bmhlYWx0aHkgQVBJIHN0YXR1c1xuICAgIHJlY29yZEhlYWx0aCh7XG4gICAgICBzZXJ2aWNlOiAnYXBpJyxcbiAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICByZXNwb25zZVRpbWU6IGVycm9yUmVzcG9uc2VUaW1lLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCBlcnJvclJlc3BvbnNlID0ge1xuICAgICAgc3RhdHVzOiAndW5oZWFsdGh5JyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBNYXRoLnJvdW5kKGVycm9yUmVzcG9uc2VUaW1lKVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IE5leHRSZXNwb25zZS5qc29uKGVycm9yUmVzcG9uc2UsIHsgc3RhdHVzOiA1MDMgfSlcbiAgICBcbiAgICByZXNwb25zZS5oZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsICduby1jYWNoZSwgbm8tc3RvcmUsIG11c3QtcmV2YWxpZGF0ZScpXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ1gtSGVhbHRoLVN0YXR1cycsICd1bmhlYWx0aHknKVxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdYLVJlc3BvbnNlLVRpbWUnLCBNYXRoLnJvdW5kKGVycm9yUmVzcG9uc2VUaW1lKS50b1N0cmluZygpKVxuICAgIFxuICAgIHJldHVybiByZXNwb25zZVxuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFN0cmlwZVNlcnZlciIsInZhbGlkYXRlRW52aXJvbm1lbnRDb25maWciLCJnZXRDb25maWciLCJyZWNvcmRIZWFsdGgiLCJoZWFsdGhNb25pdG9yIiwiR0VUIiwic3RhcnRUaW1lIiwicGVyZm9ybWFuY2UiLCJub3ciLCJjb25maWciLCJlbnZWYWxpZGF0aW9uIiwic3RyaXBlU3RhdHVzIiwic3RyaXBlRXJyb3IiLCJzdHJpcGVSZXNwb25zZVRpbWUiLCJzdHJpcGVTdGFydCIsInN0cmlwZSIsInRpbWVvdXRQcm9taXNlIiwiUHJvbWlzZSIsIl8iLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwiRXJyb3IiLCJyYWNlIiwiYWNjb3VudHMiLCJyZXRyaWV2ZSIsImVycm9yIiwibWVzc2FnZSIsInN0b3JhZ2VTdGF0dXMiLCJzdG9yYWdlRXJyb3IiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsInRvdGFsUmVzcG9uc2VUaW1lIiwic2VydmljZSIsInN0YXR1cyIsInJlc3BvbnNlVGltZSIsInN5c3RlbUhlYWx0aCIsImdldFN5c3RlbUhlYWx0aCIsImhlYWx0aERhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlbnZpcm9ubWVudCIsIm1vZGUiLCJzdHJpcGVNb2RlIiwidmVyc2lvbiIsInByb2Nlc3MiLCJlbnYiLCJucG1fcGFja2FnZV92ZXJzaW9uIiwiY2hlY2tzIiwiaXNWYWxpZCIsInN0b3JhZ2UiLCJhcGkiLCJNYXRoIiwicm91bmQiLCJkZXRhaWxzIiwiZXJyb3JzIiwidXB0aW1lIiwiaXNEZXZlbG9wbWVudCIsImRlYnVnIiwibm9kZVZlcnNpb24iLCJwbGF0Zm9ybSIsIm1lbW9yeSIsIm1lbW9yeVVzYWdlIiwiaXNIZWFsdGh5IiwiaXNEZWdyYWRlZCIsInJlc3BvbnNlIiwianNvbiIsImhlYWRlcnMiLCJzZXQiLCJ0b1N0cmluZyIsImVycm9yUmVzcG9uc2VUaW1lIiwiZXJyb3JSZXNwb25zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/health/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/environment.ts":
/*!********************************!*\
  !*** ./src/lib/environment.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENVIRONMENT_CONSTANTS: () => (/* binding */ ENVIRONMENT_CONSTANTS),\n/* harmony export */   getApiBaseUrl: () => (/* binding */ getApiBaseUrl),\n/* harmony export */   getBooleanEnvVar: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   getCurrentEnvironment: () => (/* binding */ getCurrentEnvironment),\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   getEnvironmentConfig: () => (/* binding */ getEnvironmentConfig),\n/* harmony export */   getFrontendUrl: () => (/* binding */ getFrontendUrl),\n/* harmony export */   getNumericEnvVar: () => (/* binding */ getNumericEnvVar),\n/* harmony export */   getStripeMode: () => (/* binding */ getStripeMode),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isEnvironment: () => (/* binding */ isEnvironment),\n/* harmony export */   isFeatureEnabled: () => (/* binding */ isFeatureEnabled),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   isTest: () => (/* binding */ isTest),\n/* harmony export */   logEnvironmentConfig: () => (/* binding */ logEnvironmentConfig),\n/* harmony export */   resetConfig: () => (/* binding */ resetConfig),\n/* harmony export */   validateEnvironmentConfig: () => (/* binding */ validateEnvironmentConfig)\n/* harmony export */ });\n/**\n * Environment detection and configuration utilities\n * Handles development vs production environment differences\n */ // ============================================================================\n// TYPES AND INTERFACES\n// ============================================================================\n// ============================================================================\n// ENVIRONMENT DETECTION\n// ============================================================================\n/**\n * Gets the current environment\n */ const getCurrentEnvironment = ()=>{\n    // Check NODE_ENV first\n    if (false) {}\n    if (false) {}\n    // Check for Vercel environment\n    if (process.env.VERCEL_ENV === \"production\") {\n        return \"production\";\n    }\n    // Check for other production indicators\n    if (process.env.RAILWAY_ENVIRONMENT === \"production\" || process.env.RENDER_SERVICE_TYPE || process.env.HEROKU_APP_NAME) {\n        return \"production\";\n    }\n    // Default to development\n    return \"development\";\n};\n/**\n * Determines Stripe mode based on environment and keys\n */ const getStripeMode = ()=>{\n    const environment = getCurrentEnvironment();\n    // Always use test mode in development and test environments\n    if (environment === \"development\" || environment === \"test\") {\n        return \"test\";\n    }\n    // In production, check if we have live keys\n    const publishableKey = \"pk_test_51R9pLT2KYi1EVCMzHc8vDqSNTMpgfL5kMzX4qP68gdQp53ioubKm4dquVENb7YByxZ06bxOJhjzdnVLD2vo5wBbh00O0ngluNA\";\n    const secretKey = process.env.STRIPE_SECRET_KEY;\n    if (publishableKey?.startsWith(\"pk_live_\") && secretKey?.startsWith(\"sk_live_\")) {\n        return \"live\";\n    }\n    // Default to test mode for safety\n    return \"test\";\n};\n/**\n * Gets the API base URL based on environment\n */ const getApiBaseUrl = ()=>{\n    const environment = getCurrentEnvironment();\n    // In production, use the actual domain\n    if (environment === \"production\") {\n        return process.env.NEXTAUTH_URL || process.env.VERCEL_URL || \"https://mytechglasses.com\";\n    }\n    // In development/test, use localhost\n    return process.env.NEXTAUTH_URL || \"http://localhost:3000\";\n};\n/**\n * Gets the frontend URL for redirects\n */ const getFrontendUrl = ()=>{\n    return getApiBaseUrl();\n};\n// ============================================================================\n// ENVIRONMENT CONFIGURATION\n// ============================================================================\n/**\n * Gets complete environment configuration\n */ const getEnvironmentConfig = ()=>{\n    const environment = getCurrentEnvironment();\n    const isDevelopment = environment === \"development\";\n    const isProduction = environment === \"production\";\n    const isTest = environment === \"test\";\n    return {\n        environment,\n        isDevelopment,\n        isProduction,\n        isTest,\n        stripeMode: getStripeMode(),\n        apiBaseUrl: getApiBaseUrl(),\n        frontendUrl: getFrontendUrl(),\n        enableDebugLogging: isDevelopment || isTest,\n        enableErrorReporting: isProduction,\n        enableAnalytics: isProduction,\n        enablePerformanceMonitoring: isProduction,\n        rateLimitEnabled: isProduction,\n        corsEnabled: true,\n        securityHeadersEnabled: isProduction\n    };\n};\n// ============================================================================\n// FEATURE FLAGS\n// ============================================================================\n/**\n * Checks if a feature is enabled based on environment\n */ const isFeatureEnabled = (feature)=>{\n    const config = getEnvironmentConfig();\n    switch(feature){\n        case \"debug-logging\":\n            return config.enableDebugLogging;\n        case \"error-reporting\":\n            return config.enableErrorReporting;\n        case \"analytics\":\n            return config.enableAnalytics;\n        case \"performance-monitoring\":\n            return config.enablePerformanceMonitoring;\n        case \"rate-limiting\":\n            return config.rateLimitEnabled;\n        case \"cors\":\n            return config.corsEnabled;\n        case \"security-headers\":\n            return config.securityHeadersEnabled;\n        case \"stripe-webhooks\":\n            return config.isProduction;\n        case \"email-notifications\":\n            return config.isProduction;\n        case \"sms-notifications\":\n            return config.isProduction;\n        default:\n            return false;\n    }\n};\n// ============================================================================\n// VALIDATION\n// ============================================================================\n/**\n * Validates environment configuration\n */ const validateEnvironmentConfig = ()=>{\n    const errors = [];\n    const config = getEnvironmentConfig();\n    // Check required environment variables\n    if (false) {}\n    if (!process.env.STRIPE_SECRET_KEY) {\n        errors.push(\"STRIPE_SECRET_KEY is required\");\n    }\n    if (!process.env.NEXTAUTH_SECRET) {\n        errors.push(\"NEXTAUTH_SECRET is required\");\n    }\n    // Validate Stripe key consistency\n    const publishableKey = \"pk_test_51R9pLT2KYi1EVCMzHc8vDqSNTMpgfL5kMzX4qP68gdQp53ioubKm4dquVENb7YByxZ06bxOJhjzdnVLD2vo5wBbh00O0ngluNA\";\n    const secretKey = process.env.STRIPE_SECRET_KEY;\n    if (publishableKey && secretKey) {\n        const pkMode = publishableKey.startsWith(\"pk_live_\") ? \"live\" : \"test\";\n        const skMode = secretKey.startsWith(\"sk_live_\") ? \"live\" : \"test\";\n        if (pkMode !== skMode) {\n            errors.push(\"Stripe publishable key and secret key must be from the same environment (both test or both live)\");\n        }\n        if (config.isProduction && pkMode === \"test\") {\n            errors.push(\"Production environment should use live Stripe keys\");\n        }\n    }\n    // Validate URLs\n    if (config.isProduction) {\n        if (!process.env.NEXTAUTH_URL || process.env.NEXTAUTH_URL.includes(\"localhost\")) {\n            errors.push(\"Production environment requires a proper NEXTAUTH_URL (not localhost)\");\n        }\n    }\n    return {\n        isValid: errors.length === 0,\n        errors\n    };\n};\n// ============================================================================\n// LOGGING AND MONITORING\n// ============================================================================\n/**\n * Logs environment configuration on startup\n */ const logEnvironmentConfig = ()=>{\n    const config = getEnvironmentConfig();\n    const validation = validateEnvironmentConfig();\n    console.log(\"\\uD83D\\uDD27 Environment Configuration:\");\n    console.log(`   Node Environment: ${config.environment}`);\n    console.log(`   Stripe Mode: ${config.stripeMode.toUpperCase()}`);\n    console.log(`   API Base URL: ${config.apiBaseUrl}`);\n    console.log(`   Frontend URL: ${config.frontendUrl}`);\n    if (config.isDevelopment) {\n        console.log(\"\\uD83E\\uDDEA Running in development mode\");\n        console.log(`   Debug Logging: ${config.enableDebugLogging ? \"enabled\" : \"disabled\"}`);\n    }\n    if (config.isProduction) {\n        console.log(\"\\uD83D\\uDE80 Running in production mode\");\n        console.log(`   Error Reporting: ${config.enableErrorReporting ? \"enabled\" : \"disabled\"}`);\n        console.log(`   Analytics: ${config.enableAnalytics ? \"enabled\" : \"disabled\"}`);\n        console.log(`   Rate Limiting: ${config.rateLimitEnabled ? \"enabled\" : \"disabled\"}`);\n        console.log(`   Security Headers: ${config.securityHeadersEnabled ? \"enabled\" : \"disabled\"}`);\n    }\n    if (config.stripeMode === \"test\") {\n        console.log(\"\\uD83E\\uDDEA Running in Stripe TEST mode\");\n    } else {\n        console.log(\"\\uD83D\\uDCB3 Running in Stripe LIVE mode\");\n    }\n    if (!validation.isValid) {\n        console.error(\"❌ Environment configuration errors:\");\n        validation.errors.forEach((error)=>console.error(`   - ${error}`));\n    } else {\n        console.log(\"✅ Environment configuration is valid\");\n    }\n};\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Gets environment-specific configuration value\n */ const getEnvVar = (key, defaultValue, required = false)=>{\n    const value = process.env[key] || defaultValue;\n    if (required && !value) {\n        throw new Error(`Required environment variable ${key} is not set`);\n    }\n    return value || \"\";\n};\n/**\n * Gets boolean environment variable\n */ const getBooleanEnvVar = (key, defaultValue = false)=>{\n    const value = process.env[key];\n    if (!value) return defaultValue;\n    return value.toLowerCase() === \"true\" || value === \"1\";\n};\n/**\n * Gets numeric environment variable\n */ const getNumericEnvVar = (key, defaultValue = 0)=>{\n    const value = process.env[key];\n    if (!value) return defaultValue;\n    const parsed = parseInt(value, 10);\n    return isNaN(parsed) ? defaultValue : parsed;\n};\n/**\n * Checks if running in specific environment\n */ const isEnvironment = (env)=>{\n    return getCurrentEnvironment() === env;\n};\n/**\n * Checks if running in development\n */ const isDevelopment = ()=>{\n    return isEnvironment(\"development\");\n};\n/**\n * Checks if running in production\n */ const isProduction = ()=>{\n    return isEnvironment(\"production\");\n};\n/**\n * Checks if running in test\n */ const isTest = ()=>{\n    return isEnvironment(\"test\");\n};\n// ============================================================================\n// CONSTANTS\n// ============================================================================\nconst ENVIRONMENT_CONSTANTS = {\n    DEFAULT_API_TIMEOUT: 30000,\n    DEFAULT_RATE_LIMIT: 100,\n    DEFAULT_CORS_ORIGINS: [\n        \"http://localhost:3000\",\n        \"https://mytechglasses.com\"\n    ],\n    STRIPE_WEBHOOK_TOLERANCE: 300,\n    SESSION_TIMEOUT: 30 * 60 * 1000,\n    CACHE_TTL: 5 * 60 * 1000\n};\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\n// Cache the environment config to avoid repeated calculations\nlet cachedConfig = null;\n/**\n * Gets cached environment configuration\n */ const getConfig = ()=>{\n    if (!cachedConfig) {\n        cachedConfig = getEnvironmentConfig();\n    }\n    return cachedConfig;\n};\n/**\n * Resets cached configuration (useful for testing)\n */ const resetConfig = ()=>{\n    cachedConfig = null;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU9PLE1BQU1GLFVBQVVQLGVBQWVPO0FBQ3hDLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU1HLGdCQUFnQixDQUFDN0Q7SUFDNUIsT0FBT0YsNEJBQTRCRTtBQUNyQyxFQUFDO0FBRUQ7O0NBRUMsR0FDTSxNQUFNaUIsZ0JBQWdCO0lBQzNCLE9BQU80QyxjQUFjO0FBQ3ZCLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU0zQyxlQUFlO0lBQzFCLE9BQU8yQyxjQUFjO0FBQ3ZCLEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU0xQyxTQUFTO0lBQ3BCLE9BQU8wQyxjQUFjO0FBQ3ZCLEVBQUM7QUFFRCwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLCtFQUErRTtBQUV4RSxNQUFNQyx3QkFBd0I7SUFDbkNDLHFCQUFxQjtJQUNyQkMsb0JBQW9CO0lBQ3BCQyxzQkFBc0I7UUFBQztRQUF5QjtLQUE0QjtJQUM1RUMsMEJBQTBCO0lBQzFCQyxpQkFBaUIsS0FBSyxLQUFLO0lBQzNCQyxXQUFXLElBQUksS0FBSztBQUN0QixFQUFVO0FBRVYsK0VBQStFO0FBQy9FLHFCQUFxQjtBQUNyQiwrRUFBK0U7QUFFL0UsOERBQThEO0FBQzlELElBQUlDLGVBQXlDO0FBRTdDOztDQUVDLEdBQ00sTUFBTUMsWUFBWTtJQUN2QixJQUFJLENBQUNELGNBQWM7UUFDakJBLGVBQWVyRDtJQUNqQjtJQUNBLE9BQU9xRDtBQUNULEVBQUM7QUFFRDs7Q0FFQyxHQUNNLE1BQU1FLGNBQWM7SUFDekJGLGVBQWU7QUFDakIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LXRlY2gtZ2xhc3Nlcy8uL3NyYy9saWIvZW52aXJvbm1lbnQudHM/NWM2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVudmlyb25tZW50IGRldGVjdGlvbiBhbmQgY29uZmlndXJhdGlvbiB1dGlsaXRpZXNcbiAqIEhhbmRsZXMgZGV2ZWxvcG1lbnQgdnMgcHJvZHVjdGlvbiBlbnZpcm9ubWVudCBkaWZmZXJlbmNlc1xuICovXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEVTIEFORCBJTlRFUkZBQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCB0eXBlIEVudmlyb25tZW50ID0gJ2RldmVsb3BtZW50JyB8ICdwcm9kdWN0aW9uJyB8ICd0ZXN0J1xuXG5leHBvcnQgaW50ZXJmYWNlIEVudmlyb25tZW50Q29uZmlnIHtcbiAgZW52aXJvbm1lbnQ6IEVudmlyb25tZW50XG4gIGlzRGV2ZWxvcG1lbnQ6IGJvb2xlYW5cbiAgaXNQcm9kdWN0aW9uOiBib29sZWFuXG4gIGlzVGVzdDogYm9vbGVhblxuICBzdHJpcGVNb2RlOiAndGVzdCcgfCAnbGl2ZSdcbiAgYXBpQmFzZVVybDogc3RyaW5nXG4gIGZyb250ZW5kVXJsOiBzdHJpbmdcbiAgZW5hYmxlRGVidWdMb2dnaW5nOiBib29sZWFuXG4gIGVuYWJsZUVycm9yUmVwb3J0aW5nOiBib29sZWFuXG4gIGVuYWJsZUFuYWx5dGljczogYm9vbGVhblxuICBlbmFibGVQZXJmb3JtYW5jZU1vbml0b3Jpbmc6IGJvb2xlYW5cbiAgcmF0ZUxpbWl0RW5hYmxlZDogYm9vbGVhblxuICBjb3JzRW5hYmxlZDogYm9vbGVhblxuICBzZWN1cml0eUhlYWRlcnNFbmFibGVkOiBib29sZWFuXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVklST05NRU5UIERFVEVDVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEdldHMgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRFbnZpcm9ubWVudCA9ICgpOiBFbnZpcm9ubWVudCA9PiB7XG4gIC8vIENoZWNrIE5PREVfRU5WIGZpcnN0XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XG4gICAgcmV0dXJuICd0ZXN0J1xuICB9XG4gIFxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIHJldHVybiAncHJvZHVjdGlvbidcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZm9yIFZlcmNlbCBlbnZpcm9ubWVudFxuICBpZiAocHJvY2Vzcy5lbnYuVkVSQ0VMX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmV0dXJuICdwcm9kdWN0aW9uJ1xuICB9XG4gIFxuICAvLyBDaGVjayBmb3Igb3RoZXIgcHJvZHVjdGlvbiBpbmRpY2F0b3JzXG4gIGlmIChwcm9jZXNzLmVudi5SQUlMV0FZX0VOVklST05NRU5UID09PSAncHJvZHVjdGlvbicgfHxcbiAgICAgIHByb2Nlc3MuZW52LlJFTkRFUl9TRVJWSUNFX1RZUEUgfHxcbiAgICAgIHByb2Nlc3MuZW52LkhFUk9LVV9BUFBfTkFNRSkge1xuICAgIHJldHVybiAncHJvZHVjdGlvbidcbiAgfVxuICBcbiAgLy8gRGVmYXVsdCB0byBkZXZlbG9wbWVudFxuICByZXR1cm4gJ2RldmVsb3BtZW50J1xufVxuXG4vKipcbiAqIERldGVybWluZXMgU3RyaXBlIG1vZGUgYmFzZWQgb24gZW52aXJvbm1lbnQgYW5kIGtleXNcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFN0cmlwZU1vZGUgPSAoKTogJ3Rlc3QnIHwgJ2xpdmUnID0+IHtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBnZXRDdXJyZW50RW52aXJvbm1lbnQoKVxuICBcbiAgLy8gQWx3YXlzIHVzZSB0ZXN0IG1vZGUgaW4gZGV2ZWxvcG1lbnQgYW5kIHRlc3QgZW52aXJvbm1lbnRzXG4gIGlmIChlbnZpcm9ubWVudCA9PT0gJ2RldmVsb3BtZW50JyB8fCBlbnZpcm9ubWVudCA9PT0gJ3Rlc3QnKSB7XG4gICAgcmV0dXJuICd0ZXN0J1xuICB9XG4gIFxuICAvLyBJbiBwcm9kdWN0aW9uLCBjaGVjayBpZiB3ZSBoYXZlIGxpdmUga2V5c1xuICBjb25zdCBwdWJsaXNoYWJsZUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVlcbiAgY29uc3Qgc2VjcmV0S2V5ID0gcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVlcbiAgXG4gIGlmIChwdWJsaXNoYWJsZUtleT8uc3RhcnRzV2l0aCgncGtfbGl2ZV8nKSAmJiBzZWNyZXRLZXk/LnN0YXJ0c1dpdGgoJ3NrX2xpdmVfJykpIHtcbiAgICByZXR1cm4gJ2xpdmUnXG4gIH1cbiAgXG4gIC8vIERlZmF1bHQgdG8gdGVzdCBtb2RlIGZvciBzYWZldHlcbiAgcmV0dXJuICd0ZXN0J1xufVxuXG4vKipcbiAqIEdldHMgdGhlIEFQSSBiYXNlIFVSTCBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgY29uc3QgZ2V0QXBpQmFzZVVybCA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBlbnZpcm9ubWVudCA9IGdldEN1cnJlbnRFbnZpcm9ubWVudCgpXG4gIFxuICAvLyBJbiBwcm9kdWN0aW9uLCB1c2UgdGhlIGFjdHVhbCBkb21haW5cbiAgaWYgKGVudmlyb25tZW50ID09PSAncHJvZHVjdGlvbicpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8IHByb2Nlc3MuZW52LlZFUkNFTF9VUkwgfHwgJ2h0dHBzOi8vbXl0ZWNoZ2xhc3Nlcy5jb20nXG4gIH1cbiAgXG4gIC8vIEluIGRldmVsb3BtZW50L3Rlc3QsIHVzZSBsb2NhbGhvc3RcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGZyb250ZW5kIFVSTCBmb3IgcmVkaXJlY3RzXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGcm9udGVuZFVybCA9ICgpOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZ2V0QXBpQmFzZVVybCgpXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEVOVklST05NRU5UIENPTkZJR1VSQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXRzIGNvbXBsZXRlIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVudmlyb25tZW50Q29uZmlnID0gKCk6IEVudmlyb25tZW50Q29uZmlnID0+IHtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBnZXRDdXJyZW50RW52aXJvbm1lbnQoKVxuICBjb25zdCBpc0RldmVsb3BtZW50ID0gZW52aXJvbm1lbnQgPT09ICdkZXZlbG9wbWVudCdcbiAgY29uc3QgaXNQcm9kdWN0aW9uID0gZW52aXJvbm1lbnQgPT09ICdwcm9kdWN0aW9uJ1xuICBjb25zdCBpc1Rlc3QgPSBlbnZpcm9ubWVudCA9PT0gJ3Rlc3QnXG4gIFxuICByZXR1cm4ge1xuICAgIGVudmlyb25tZW50LFxuICAgIGlzRGV2ZWxvcG1lbnQsXG4gICAgaXNQcm9kdWN0aW9uLFxuICAgIGlzVGVzdCxcbiAgICBzdHJpcGVNb2RlOiBnZXRTdHJpcGVNb2RlKCksXG4gICAgYXBpQmFzZVVybDogZ2V0QXBpQmFzZVVybCgpLFxuICAgIGZyb250ZW5kVXJsOiBnZXRGcm9udGVuZFVybCgpLFxuICAgIGVuYWJsZURlYnVnTG9nZ2luZzogaXNEZXZlbG9wbWVudCB8fCBpc1Rlc3QsXG4gICAgZW5hYmxlRXJyb3JSZXBvcnRpbmc6IGlzUHJvZHVjdGlvbixcbiAgICBlbmFibGVBbmFseXRpY3M6IGlzUHJvZHVjdGlvbixcbiAgICBlbmFibGVQZXJmb3JtYW5jZU1vbml0b3Jpbmc6IGlzUHJvZHVjdGlvbixcbiAgICByYXRlTGltaXRFbmFibGVkOiBpc1Byb2R1Y3Rpb24sXG4gICAgY29yc0VuYWJsZWQ6IHRydWUsXG4gICAgc2VjdXJpdHlIZWFkZXJzRW5hYmxlZDogaXNQcm9kdWN0aW9uXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRkVBVFVSRSBGTEFHU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGZlYXR1cmUgaXMgZW5hYmxlZCBiYXNlZCBvbiBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgY29uc3QgaXNGZWF0dXJlRW5hYmxlZCA9IChmZWF0dXJlOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgY29uc3QgY29uZmlnID0gZ2V0RW52aXJvbm1lbnRDb25maWcoKVxuICBcbiAgc3dpdGNoIChmZWF0dXJlKSB7XG4gICAgY2FzZSAnZGVidWctbG9nZ2luZyc6XG4gICAgICByZXR1cm4gY29uZmlnLmVuYWJsZURlYnVnTG9nZ2luZ1xuICAgIFxuICAgIGNhc2UgJ2Vycm9yLXJlcG9ydGluZyc6XG4gICAgICByZXR1cm4gY29uZmlnLmVuYWJsZUVycm9yUmVwb3J0aW5nXG4gICAgXG4gICAgY2FzZSAnYW5hbHl0aWNzJzpcbiAgICAgIHJldHVybiBjb25maWcuZW5hYmxlQW5hbHl0aWNzXG4gICAgXG4gICAgY2FzZSAncGVyZm9ybWFuY2UtbW9uaXRvcmluZyc6XG4gICAgICByZXR1cm4gY29uZmlnLmVuYWJsZVBlcmZvcm1hbmNlTW9uaXRvcmluZ1xuICAgIFxuICAgIGNhc2UgJ3JhdGUtbGltaXRpbmcnOlxuICAgICAgcmV0dXJuIGNvbmZpZy5yYXRlTGltaXRFbmFibGVkXG4gICAgXG4gICAgY2FzZSAnY29ycyc6XG4gICAgICByZXR1cm4gY29uZmlnLmNvcnNFbmFibGVkXG4gICAgXG4gICAgY2FzZSAnc2VjdXJpdHktaGVhZGVycyc6XG4gICAgICByZXR1cm4gY29uZmlnLnNlY3VyaXR5SGVhZGVyc0VuYWJsZWRcbiAgICBcbiAgICBjYXNlICdzdHJpcGUtd2ViaG9va3MnOlxuICAgICAgcmV0dXJuIGNvbmZpZy5pc1Byb2R1Y3Rpb25cbiAgICBcbiAgICBjYXNlICdlbWFpbC1ub3RpZmljYXRpb25zJzpcbiAgICAgIHJldHVybiBjb25maWcuaXNQcm9kdWN0aW9uXG4gICAgXG4gICAgY2FzZSAnc21zLW5vdGlmaWNhdGlvbnMnOlxuICAgICAgcmV0dXJuIGNvbmZpZy5pc1Byb2R1Y3Rpb25cbiAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVkFMSURBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFZhbGlkYXRlcyBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZUVudmlyb25tZW50Q29uZmlnID0gKCk6IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9ID0+IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGNvbmZpZyA9IGdldEVudmlyb25tZW50Q29uZmlnKClcbiAgXG4gIC8vIENoZWNrIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkpIHtcbiAgICBlcnJvcnMucHVzaCgnTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSBpcyByZXF1aXJlZCcpXG4gIH1cbiAgXG4gIGlmICghcHJvY2Vzcy5lbnYuU1RSSVBFX1NFQ1JFVF9LRVkpIHtcbiAgICBlcnJvcnMucHVzaCgnU1RSSVBFX1NFQ1JFVF9LRVkgaXMgcmVxdWlyZWQnKVxuICB9XG4gIFxuICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCkge1xuICAgIGVycm9ycy5wdXNoKCdORVhUQVVUSF9TRUNSRVQgaXMgcmVxdWlyZWQnKVxuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBTdHJpcGUga2V5IGNvbnNpc3RlbmN5XG4gIGNvbnN0IHB1Ymxpc2hhYmxlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWVxuICBjb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWVxuICBcbiAgaWYgKHB1Ymxpc2hhYmxlS2V5ICYmIHNlY3JldEtleSkge1xuICAgIGNvbnN0IHBrTW9kZSA9IHB1Ymxpc2hhYmxlS2V5LnN0YXJ0c1dpdGgoJ3BrX2xpdmVfJykgPyAnbGl2ZScgOiAndGVzdCdcbiAgICBjb25zdCBza01vZGUgPSBzZWNyZXRLZXkuc3RhcnRzV2l0aCgnc2tfbGl2ZV8nKSA/ICdsaXZlJyA6ICd0ZXN0J1xuICAgIFxuICAgIGlmIChwa01vZGUgIT09IHNrTW9kZSkge1xuICAgICAgZXJyb3JzLnB1c2goJ1N0cmlwZSBwdWJsaXNoYWJsZSBrZXkgYW5kIHNlY3JldCBrZXkgbXVzdCBiZSBmcm9tIHRoZSBzYW1lIGVudmlyb25tZW50IChib3RoIHRlc3Qgb3IgYm90aCBsaXZlKScpXG4gICAgfVxuICAgIFxuICAgIGlmIChjb25maWcuaXNQcm9kdWN0aW9uICYmIHBrTW9kZSA9PT0gJ3Rlc3QnKSB7XG4gICAgICBlcnJvcnMucHVzaCgnUHJvZHVjdGlvbiBlbnZpcm9ubWVudCBzaG91bGQgdXNlIGxpdmUgU3RyaXBlIGtleXMnKVxuICAgIH1cbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgVVJMc1xuICBpZiAoY29uZmlnLmlzUHJvZHVjdGlvbikge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMIHx8IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTC5pbmNsdWRlcygnbG9jYWxob3N0JykpIHtcbiAgICAgIGVycm9ycy5wdXNoKCdQcm9kdWN0aW9uIGVudmlyb25tZW50IHJlcXVpcmVzIGEgcHJvcGVyIE5FWFRBVVRIX1VSTCAobm90IGxvY2FsaG9zdCknKVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9yc1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIExPR0dJTkcgQU5EIE1PTklUT1JJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBMb2dzIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24gb24gc3RhcnR1cFxuICovXG5leHBvcnQgY29uc3QgbG9nRW52aXJvbm1lbnRDb25maWcgPSAoKTogdm9pZCA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldEVudmlyb25tZW50Q29uZmlnKClcbiAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlRW52aXJvbm1lbnRDb25maWcoKVxuICBcbiAgY29uc29sZS5sb2coJ/CflKcgRW52aXJvbm1lbnQgQ29uZmlndXJhdGlvbjonKVxuICBjb25zb2xlLmxvZyhgICAgTm9kZSBFbnZpcm9ubWVudDogJHtjb25maWcuZW52aXJvbm1lbnR9YClcbiAgY29uc29sZS5sb2coYCAgIFN0cmlwZSBNb2RlOiAke2NvbmZpZy5zdHJpcGVNb2RlLnRvVXBwZXJDYXNlKCl9YClcbiAgY29uc29sZS5sb2coYCAgIEFQSSBCYXNlIFVSTDogJHtjb25maWcuYXBpQmFzZVVybH1gKVxuICBjb25zb2xlLmxvZyhgICAgRnJvbnRlbmQgVVJMOiAke2NvbmZpZy5mcm9udGVuZFVybH1gKVxuICBcbiAgaWYgKGNvbmZpZy5pc0RldmVsb3BtZW50KSB7XG4gICAgY29uc29sZS5sb2coJ/Cfp6ogUnVubmluZyBpbiBkZXZlbG9wbWVudCBtb2RlJylcbiAgICBjb25zb2xlLmxvZyhgICAgRGVidWcgTG9nZ2luZzogJHtjb25maWcuZW5hYmxlRGVidWdMb2dnaW5nID8gJ2VuYWJsZWQnIDogJ2Rpc2FibGVkJ31gKVxuICB9XG4gIFxuICBpZiAoY29uZmlnLmlzUHJvZHVjdGlvbikge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIFJ1bm5pbmcgaW4gcHJvZHVjdGlvbiBtb2RlJylcbiAgICBjb25zb2xlLmxvZyhgICAgRXJyb3IgUmVwb3J0aW5nOiAke2NvbmZpZy5lbmFibGVFcnJvclJlcG9ydGluZyA/ICdlbmFibGVkJyA6ICdkaXNhYmxlZCd9YClcbiAgICBjb25zb2xlLmxvZyhgICAgQW5hbHl0aWNzOiAke2NvbmZpZy5lbmFibGVBbmFseXRpY3MgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWApXG4gICAgY29uc29sZS5sb2coYCAgIFJhdGUgTGltaXRpbmc6ICR7Y29uZmlnLnJhdGVMaW1pdEVuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWApXG4gICAgY29uc29sZS5sb2coYCAgIFNlY3VyaXR5IEhlYWRlcnM6ICR7Y29uZmlnLnNlY3VyaXR5SGVhZGVyc0VuYWJsZWQgPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnfWApXG4gIH1cbiAgXG4gIGlmIChjb25maWcuc3RyaXBlTW9kZSA9PT0gJ3Rlc3QnKSB7XG4gICAgY29uc29sZS5sb2coJ/Cfp6ogUnVubmluZyBpbiBTdHJpcGUgVEVTVCBtb2RlJylcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZygn8J+SsyBSdW5uaW5nIGluIFN0cmlwZSBMSVZFIG1vZGUnKVxuICB9XG4gIFxuICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFbnZpcm9ubWVudCBjb25maWd1cmF0aW9uIGVycm9yczonKVxuICAgIHZhbGlkYXRpb24uZXJyb3JzLmZvckVhY2goZXJyb3IgPT4gY29uc29sZS5lcnJvcihgICAgLSAke2Vycm9yfWApKVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKCfinIUgRW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBpcyB2YWxpZCcpXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVVRJTElUWSBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXRzIGVudmlyb25tZW50LXNwZWNpZmljIGNvbmZpZ3VyYXRpb24gdmFsdWVcbiAqL1xuZXhwb3J0IGNvbnN0IGdldEVudlZhciA9IChcbiAga2V5OiBzdHJpbmcsIFxuICBkZWZhdWx0VmFsdWU/OiBzdHJpbmcsIFxuICByZXF1aXJlZDogYm9vbGVhbiA9IGZhbHNlXG4pOiBzdHJpbmcgPT4ge1xuICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W2tleV0gfHwgZGVmYXVsdFZhbHVlXG4gIFxuICBpZiAocmVxdWlyZWQgJiYgIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZXF1aXJlZCBlbnZpcm9ubWVudCB2YXJpYWJsZSAke2tleX0gaXMgbm90IHNldGApXG4gIH1cbiAgXG4gIHJldHVybiB2YWx1ZSB8fCAnJ1xufVxuXG4vKipcbiAqIEdldHMgYm9vbGVhbiBlbnZpcm9ubWVudCB2YXJpYWJsZVxuICovXG5leHBvcnQgY29uc3QgZ2V0Qm9vbGVhbkVudlZhciA9IChrZXk6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBib29sZWFuID0gZmFsc2UpOiBib29sZWFuID0+IHtcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltrZXldXG4gIFxuICBpZiAoIXZhbHVlKSByZXR1cm4gZGVmYXVsdFZhbHVlXG4gIFxuICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnIHx8IHZhbHVlID09PSAnMSdcbn1cblxuLyoqXG4gKiBHZXRzIG51bWVyaWMgZW52aXJvbm1lbnQgdmFyaWFibGVcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE51bWVyaWNFbnZWYXIgPSAoa2V5OiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogbnVtYmVyID0gMCk6IG51bWJlciA9PiB7XG4gIGNvbnN0IHZhbHVlID0gcHJvY2Vzcy5lbnZba2V5XVxuICBcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIGRlZmF1bHRWYWx1ZVxuICBcbiAgY29uc3QgcGFyc2VkID0gcGFyc2VJbnQodmFsdWUsIDEwKVxuICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IGRlZmF1bHRWYWx1ZSA6IHBhcnNlZFxufVxuXG4vKipcbiAqIENoZWNrcyBpZiBydW5uaW5nIGluIHNwZWNpZmljIGVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBjb25zdCBpc0Vudmlyb25tZW50ID0gKGVudjogRW52aXJvbm1lbnQpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGdldEN1cnJlbnRFbnZpcm9ubWVudCgpID09PSBlbnZcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgcnVubmluZyBpbiBkZXZlbG9wbWVudFxuICovXG5leHBvcnQgY29uc3QgaXNEZXZlbG9wbWVudCA9ICgpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIGlzRW52aXJvbm1lbnQoJ2RldmVsb3BtZW50Jylcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgcnVubmluZyBpbiBwcm9kdWN0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBpc1Byb2R1Y3Rpb24gPSAoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBpc0Vudmlyb25tZW50KCdwcm9kdWN0aW9uJylcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgcnVubmluZyBpbiB0ZXN0XG4gKi9cbmV4cG9ydCBjb25zdCBpc1Rlc3QgPSAoKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBpc0Vudmlyb25tZW50KCd0ZXN0Jylcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gQ09OU1RBTlRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBFTlZJUk9OTUVOVF9DT05TVEFOVFMgPSB7XG4gIERFRkFVTFRfQVBJX1RJTUVPVVQ6IDMwMDAwLCAvLyAzMCBzZWNvbmRzXG4gIERFRkFVTFRfUkFURV9MSU1JVDogMTAwLCAvLyByZXF1ZXN0cyBwZXIgbWludXRlXG4gIERFRkFVTFRfQ09SU19PUklHSU5TOiBbJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsICdodHRwczovL215dGVjaGdsYXNzZXMuY29tJ10sXG4gIFNUUklQRV9XRUJIT09LX1RPTEVSQU5DRTogMzAwLCAvLyA1IG1pbnV0ZXNcbiAgU0VTU0lPTl9USU1FT1VUOiAzMCAqIDYwICogMTAwMCwgLy8gMzAgbWludXRlc1xuICBDQUNIRV9UVEw6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRlc1xufSBhcyBjb25zdFxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTSU5HTEVUT04gSU5TVEFOQ0Vcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLy8gQ2FjaGUgdGhlIGVudmlyb25tZW50IGNvbmZpZyB0byBhdm9pZCByZXBlYXRlZCBjYWxjdWxhdGlvbnNcbmxldCBjYWNoZWRDb25maWc6IEVudmlyb25tZW50Q29uZmlnIHwgbnVsbCA9IG51bGxcblxuLyoqXG4gKiBHZXRzIGNhY2hlZCBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDb25maWcgPSAoKTogRW52aXJvbm1lbnRDb25maWcgPT4ge1xuICBpZiAoIWNhY2hlZENvbmZpZykge1xuICAgIGNhY2hlZENvbmZpZyA9IGdldEVudmlyb25tZW50Q29uZmlnKClcbiAgfVxuICByZXR1cm4gY2FjaGVkQ29uZmlnXG59XG5cbi8qKlxuICogUmVzZXRzIGNhY2hlZCBjb25maWd1cmF0aW9uICh1c2VmdWwgZm9yIHRlc3RpbmcpXG4gKi9cbmV4cG9ydCBjb25zdCByZXNldENvbmZpZyA9ICgpOiB2b2lkID0+IHtcbiAgY2FjaGVkQ29uZmlnID0gbnVsbFxufSJdLCJuYW1lcyI6WyJnZXRDdXJyZW50RW52aXJvbm1lbnQiLCJwcm9jZXNzIiwiZW52IiwiVkVSQ0VMX0VOViIsIlJBSUxXQVlfRU5WSVJPTk1FTlQiLCJSRU5ERVJfU0VSVklDRV9UWVBFIiwiSEVST0tVX0FQUF9OQU1FIiwiZ2V0U3RyaXBlTW9kZSIsImVudmlyb25tZW50IiwicHVibGlzaGFibGVLZXkiLCJORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZIiwic2VjcmV0S2V5IiwiU1RSSVBFX1NFQ1JFVF9LRVkiLCJzdGFydHNXaXRoIiwiZ2V0QXBpQmFzZVVybCIsIk5FWFRBVVRIX1VSTCIsIlZFUkNFTF9VUkwiLCJnZXRGcm9udGVuZFVybCIsImdldEVudmlyb25tZW50Q29uZmlnIiwiaXNEZXZlbG9wbWVudCIsImlzUHJvZHVjdGlvbiIsImlzVGVzdCIsInN0cmlwZU1vZGUiLCJhcGlCYXNlVXJsIiwiZnJvbnRlbmRVcmwiLCJlbmFibGVEZWJ1Z0xvZ2dpbmciLCJlbmFibGVFcnJvclJlcG9ydGluZyIsImVuYWJsZUFuYWx5dGljcyIsImVuYWJsZVBlcmZvcm1hbmNlTW9uaXRvcmluZyIsInJhdGVMaW1pdEVuYWJsZWQiLCJjb3JzRW5hYmxlZCIsInNlY3VyaXR5SGVhZGVyc0VuYWJsZWQiLCJpc0ZlYXR1cmVFbmFibGVkIiwiZmVhdHVyZSIsImNvbmZpZyIsInZhbGlkYXRlRW52aXJvbm1lbnRDb25maWciLCJlcnJvcnMiLCJwdXNoIiwiTkVYVEFVVEhfU0VDUkVUIiwicGtNb2RlIiwic2tNb2RlIiwiaW5jbHVkZXMiLCJpc1ZhbGlkIiwibGVuZ3RoIiwibG9nRW52aXJvbm1lbnRDb25maWciLCJ2YWxpZGF0aW9uIiwiY29uc29sZSIsImxvZyIsInRvVXBwZXJDYXNlIiwiZXJyb3IiLCJmb3JFYWNoIiwiZ2V0RW52VmFyIiwia2V5IiwiZGVmYXVsdFZhbHVlIiwicmVxdWlyZWQiLCJ2YWx1ZSIsIkVycm9yIiwiZ2V0Qm9vbGVhbkVudlZhciIsInRvTG93ZXJDYXNlIiwiZ2V0TnVtZXJpY0VudlZhciIsInBhcnNlZCIsInBhcnNlSW50IiwiaXNOYU4iLCJpc0Vudmlyb25tZW50IiwiRU5WSVJPTk1FTlRfQ09OU1RBTlRTIiwiREVGQVVMVF9BUElfVElNRU9VVCIsIkRFRkFVTFRfUkFURV9MSU1JVCIsIkRFRkFVTFRfQ09SU19PUklHSU5TIiwiU1RSSVBFX1dFQkhPT0tfVE9MRVJBTkNFIiwiU0VTU0lPTl9USU1FT1VUIiwiQ0FDSEVfVFRMIiwiY2FjaGVkQ29uZmlnIiwiZ2V0Q29uZmlnIiwicmVzZXRDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/environment.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/error-logging.ts":
/*!**********************************!*\
  !*** ./src/lib/error-logging.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ERROR_LOGGING_CONSTANTS: () => (/* binding */ ERROR_LOGGING_CONSTANTS),\n/* harmony export */   errorLogger: () => (/* binding */ errorLogger),\n/* harmony export */   logApiError: () => (/* binding */ logApiError),\n/* harmony export */   logCartError: () => (/* binding */ logCartError),\n/* harmony export */   logCheckoutError: () => (/* binding */ logCheckoutError),\n/* harmony export */   logNetworkError: () => (/* binding */ logNetworkError),\n/* harmony export */   logPaymentError: () => (/* binding */ logPaymentError),\n/* harmony export */   logPerformanceIssue: () => (/* binding */ logPerformanceIssue),\n/* harmony export */   logReactError: () => (/* binding */ logReactError),\n/* harmony export */   logStripeError: () => (/* binding */ logStripeError),\n/* harmony export */   logUIError: () => (/* binding */ logUIError),\n/* harmony export */   logValidationError: () => (/* binding */ logValidationError),\n/* harmony export */   measurePerformance: () => (/* binding */ measurePerformance),\n/* harmony export */   setupGlobalErrorHandlers: () => (/* binding */ setupGlobalErrorHandlers)\n/* harmony export */ });\n/**\n * Error logging and monitoring utilities\n * Provides comprehensive error tracking and reporting\n */ // ============================================================================\n// TYPES AND INTERFACES\n// ============================================================================\n// ============================================================================\n// ERROR STORAGE\n// ============================================================================\nclass ErrorStorage {\n    getStoredErrors() {\n        if (true) return [];\n        try {\n            const stored = localStorage.getItem(this.storageKey);\n            if (!stored) return [];\n            const errors = JSON.parse(stored);\n            // Filter out old errors\n            const cutoff = Date.now() - this.maxAge;\n            return errors.filter((error)=>new Date(error.timestamp).getTime() > cutoff);\n        } catch (error) {\n            console.warn(\"Failed to load stored errors:\", error);\n            return [];\n        }\n    }\n    saveErrors(errors) {\n        if (true) return;\n        try {\n            // Keep only the most recent errors\n            const recentErrors = errors.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, this.maxErrors);\n            localStorage.setItem(this.storageKey, JSON.stringify(recentErrors));\n        } catch (error) {\n            console.warn(\"Failed to save errors to storage:\", error);\n        }\n    }\n    addError(error) {\n        const errors = this.getStoredErrors();\n        errors.push(error);\n        this.saveErrors(errors);\n    }\n    getErrors() {\n        return this.getStoredErrors();\n    }\n    clearErrors() {\n        if (true) return;\n        localStorage.removeItem(this.storageKey);\n    }\n    markErrorResolved(errorId) {\n        const errors = this.getStoredErrors();\n        const error = errors.find((e)=>e.id === errorId);\n        if (error) {\n            error.resolved = true;\n            this.saveErrors(errors);\n        }\n    }\n    constructor(){\n        this.storageKey = \"my-tech-glasses-errors\";\n        this.maxErrors = 100;\n        this.maxAge = 7 * 24 * 60 * 60 * 1000 // 7 days\n        ;\n    }\n}\n// ============================================================================\n// ERROR LOGGER CLASS\n// ============================================================================\nclass ErrorLogger {\n    generateErrorId() {\n        return `err_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    }\n    getErrorContext() {\n        const context = {\n            timestamp: new Date().toISOString(),\n            url:  false ? 0 : undefined,\n            userAgent:  false ? 0 : undefined\n        };\n        // Try to get session ID from various sources\n        if (false) {}\n        return context;\n    }\n    shouldReportToMonitoring(level, category) {\n        // Always report errors and warnings in production\n        if (this.isProduction && (level === \"error\" || level === \"warning\")) {\n            return true;\n        }\n        // Report critical categories regardless of environment\n        const criticalCategories = [\n            \"payment\",\n            \"stripe\",\n            \"api\"\n        ];\n        return criticalCategories.includes(category);\n    }\n    reportToMonitoring(error) {\n        // In a real application, this would send to services like:\n        // - Sentry\n        // - LogRocket\n        // - DataDog\n        // - Custom monitoring endpoint\n        if (false) {}\n        // Example: Send to custom monitoring endpoint\n        if (this.isProduction) {\n            fetch(\"/api/monitoring/errors\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    error: {\n                        id: error.id,\n                        level: error.level,\n                        category: error.category,\n                        message: error.message,\n                        stack: error.stack,\n                        context: error.context,\n                        timestamp: error.timestamp\n                    }\n                })\n            }).catch((err)=>{\n                console.warn(\"Failed to report error to monitoring:\", err);\n            });\n        }\n    }\n    log(level, category, message, error, additionalContext) {\n        const errorId = this.generateErrorId();\n        const context = {\n            ...this.getErrorContext(),\n            ...additionalContext\n        };\n        const loggedError = {\n            id: errorId,\n            level,\n            category,\n            message,\n            stack: error?.stack,\n            context,\n            timestamp: new Date().toISOString(),\n            resolved: false,\n            reportedToMonitoring: false\n        };\n        // Store error locally\n        this.storage.addError(loggedError);\n        // Console logging for development\n        if (this.enableConsoleLogging) {\n            const consoleMethod = level === \"error\" ? \"error\" : level === \"warning\" ? \"warn\" : level === \"info\" ? \"info\" : \"log\";\n            console[consoleMethod](`[${category.toUpperCase()}] ${message}`, {\n                errorId,\n                context,\n                originalError: error\n            });\n        }\n        // Report to monitoring if needed\n        if (this.shouldReportToMonitoring(level, category)) {\n            loggedError.reportedToMonitoring = true;\n            this.reportToMonitoring(loggedError);\n        }\n        return errorId;\n    }\n    error(category, message, error, context) {\n        return this.log(\"error\", category, message, error, context);\n    }\n    warning(category, message, error, context) {\n        return this.log(\"warning\", category, message, error, context);\n    }\n    info(category, message, context) {\n        return this.log(\"info\", category, message, undefined, context);\n    }\n    debug(category, message, context) {\n        return this.log(\"debug\", category, message, undefined, context);\n    }\n    getMetrics() {\n        const errors = this.storage.getErrors();\n        const errorsByCategory = {\n            payment: 0,\n            validation: 0,\n            network: 0,\n            cart: 0,\n            checkout: 0,\n            stripe: 0,\n            api: 0,\n            ui: 0,\n            unknown: 0\n        };\n        const errorsByLevel = {\n            error: 0,\n            warning: 0,\n            info: 0,\n            debug: 0\n        };\n        const messageCounts = {};\n        errors.forEach((error)=>{\n            errorsByCategory[error.category]++;\n            errorsByLevel[error.level]++;\n            messageCounts[error.message] = (messageCounts[error.message] || 0) + 1;\n        });\n        const topErrors = Object.entries(messageCounts).sort(([, a], [, b])=>b - a).slice(0, 10).map(([message, count])=>({\n                message,\n                count\n            }));\n        const recentErrors = errors.sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()).slice(0, 20);\n        return {\n            totalErrors: errors.length,\n            errorsByCategory,\n            errorsByLevel,\n            recentErrors,\n            topErrors\n        };\n    }\n    clearErrors() {\n        this.storage.clearErrors();\n    }\n    markResolved(errorId) {\n        this.storage.markErrorResolved(errorId);\n    }\n    constructor(){\n        this.storage = new ErrorStorage();\n        this.isProduction = \"development\" === \"production\";\n        this.enableConsoleLogging = !this.isProduction;\n    }\n}\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\nconst errorLogger = new ErrorLogger();\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n/**\n * Logs payment-related errors\n */ const logPaymentError = (message, error, context)=>{\n    return errorLogger.error(\"payment\", message, error, context);\n};\n/**\n * Logs Stripe-related errors\n */ const logStripeError = (message, error, context)=>{\n    return errorLogger.error(\"stripe\", message, error, context);\n};\n/**\n * Logs validation errors\n */ const logValidationError = (message, context)=>{\n    return errorLogger.warning(\"validation\", message, undefined, context);\n};\n/**\n * Logs cart-related errors\n */ const logCartError = (message, error, context)=>{\n    return errorLogger.error(\"cart\", message, error, context);\n};\n/**\n * Logs checkout-related errors\n */ const logCheckoutError = (message, error, context)=>{\n    return errorLogger.error(\"checkout\", message, error, context);\n};\n/**\n * Logs API-related errors\n */ const logApiError = (message, error, context)=>{\n    return errorLogger.error(\"api\", message, error, context);\n};\n/**\n * Logs network-related errors\n */ const logNetworkError = (message, error, context)=>{\n    return errorLogger.error(\"network\", message, error, context);\n};\n/**\n * Logs UI-related errors\n */ const logUIError = (message, error, context)=>{\n    return errorLogger.warning(\"ui\", message, error, context);\n};\n// ============================================================================\n// ERROR BOUNDARY INTEGRATION\n// ============================================================================\n/**\n * Function to be called from React Error Boundaries\n */ const logReactError = (error, errorInfo)=>{\n    return errorLogger.error(\"ui\", `React Error: ${error.message}`, error, {\n        componentStack: errorInfo.componentStack,\n        errorBoundary: true\n    });\n};\n// ============================================================================\n// GLOBAL ERROR HANDLERS\n// ============================================================================\n/**\n * Sets up global error handlers for unhandled errors\n */ const setupGlobalErrorHandlers = ()=>{\n    if (true) return;\n    // Handle unhandled promise rejections\n    window.addEventListener(\"unhandledrejection\", (event)=>{\n        errorLogger.error(\"unknown\", `Unhandled Promise Rejection: ${event.reason}`, event.reason instanceof Error ? event.reason : undefined, {\n            type: \"unhandledrejection\",\n            promise: event.promise\n        });\n    });\n    // Handle uncaught errors\n    window.addEventListener(\"error\", (event)=>{\n        errorLogger.error(\"unknown\", `Uncaught Error: ${event.message}`, event.error, {\n            type: \"uncaughtError\",\n            filename: event.filename,\n            lineno: event.lineno,\n            colno: event.colno\n        });\n    });\n};\n// ============================================================================\n// PERFORMANCE MONITORING\n// ============================================================================\n/**\n * Logs performance issues\n */ const logPerformanceIssue = (metric, value, threshold)=>{\n    if (value > threshold) {\n        errorLogger.warning(\"ui\", `Performance issue: ${metric} took ${value}ms (threshold: ${threshold}ms)`, undefined, {\n            metric,\n            value,\n            threshold,\n            performance: true\n        });\n    }\n};\n/**\n * Measures and logs function execution time\n */ const measurePerformance = (name, fn, threshold = 1000)=>{\n    const start = performance.now();\n    const result = fn();\n    const duration = performance.now() - start;\n    logPerformanceIssue(name, duration, threshold);\n    return result;\n};\n// ============================================================================\n// CONSTANTS\n// ============================================================================\nconst ERROR_LOGGING_CONSTANTS = {\n    MAX_STORED_ERRORS: 100,\n    MAX_ERROR_AGE_DAYS: 7,\n    PERFORMANCE_THRESHOLDS: {\n        API_CALL: 5000,\n        COMPONENT_RENDER: 100,\n        CART_OPERATION: 500,\n        PAYMENT_OPERATION: 10000\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUM7QUFFRCwrRUFBK0U7QUFDL0UsWUFBWTtBQUNaLCtFQUErRTtBQUV4RSxNQUFNRSwwQkFBMEI7SUFDckNDLG1CQUFtQjtJQUNuQkMsb0JBQW9CO0lBQ3BCQyx3QkFBd0I7UUFDdEJDLFVBQVU7UUFDVkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7UUFDaEJDLG1CQUFtQjtJQUNyQjtBQUNGLEVBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS10ZWNoLWdsYXNzZXMvLi9zcmMvbGliL2Vycm9yLWxvZ2dpbmcudHM/YjQwMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEVycm9yIGxvZ2dpbmcgYW5kIG1vbml0b3JpbmcgdXRpbGl0aWVzXG4gKiBQcm92aWRlcyBjb21wcmVoZW5zaXZlIGVycm9yIHRyYWNraW5nIGFuZCByZXBvcnRpbmdcbiAqL1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUWVBFUyBBTkQgSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgdHlwZSBFcnJvckxldmVsID0gJ2Vycm9yJyB8ICd3YXJuaW5nJyB8ICdpbmZvJyB8ICdkZWJ1ZydcblxuZXhwb3J0IHR5cGUgRXJyb3JDYXRlZ29yeSA9IFxuICB8ICdwYXltZW50JyBcbiAgfCAndmFsaWRhdGlvbicgXG4gIHwgJ25ldHdvcmsnIFxuICB8ICdjYXJ0JyBcbiAgfCAnY2hlY2tvdXQnIFxuICB8ICdzdHJpcGUnIFxuICB8ICdhcGknIFxuICB8ICd1aScgXG4gIHwgJ3Vua25vd24nXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JDb250ZXh0IHtcbiAgdXNlcklkPzogc3RyaW5nXG4gIHNlc3Npb25JZD86IHN0cmluZ1xuICBjYXJ0SWQ/OiBzdHJpbmdcbiAgb3JkZXJJZD86IHN0cmluZ1xuICB1cmw/OiBzdHJpbmdcbiAgdXNlckFnZW50Pzogc3RyaW5nXG4gIHRpbWVzdGFtcD86IHN0cmluZ1xuICBhZGRpdGlvbmFsRGF0YT86IFJlY29yZDxzdHJpbmcsIGFueT5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2dnZWRFcnJvciB7XG4gIGlkOiBzdHJpbmdcbiAgbGV2ZWw6IEVycm9yTGV2ZWxcbiAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnlcbiAgbWVzc2FnZTogc3RyaW5nXG4gIHN0YWNrPzogc3RyaW5nXG4gIGNvbnRleHQ6IEVycm9yQ29udGV4dFxuICB0aW1lc3RhbXA6IHN0cmluZ1xuICByZXNvbHZlZDogYm9vbGVhblxuICByZXBvcnRlZFRvTW9uaXRvcmluZzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yTWV0cmljcyB7XG4gIHRvdGFsRXJyb3JzOiBudW1iZXJcbiAgZXJyb3JzQnlDYXRlZ29yeTogUmVjb3JkPEVycm9yQ2F0ZWdvcnksIG51bWJlcj5cbiAgZXJyb3JzQnlMZXZlbDogUmVjb3JkPEVycm9yTGV2ZWwsIG51bWJlcj5cbiAgcmVjZW50RXJyb3JzOiBMb2dnZWRFcnJvcltdXG4gIHRvcEVycm9yczogQXJyYXk8eyBtZXNzYWdlOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT5cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gRVJST1IgU1RPUkFHRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBFcnJvclN0b3JhZ2Uge1xuICBwcml2YXRlIHN0b3JhZ2VLZXkgPSAnbXktdGVjaC1nbGFzc2VzLWVycm9ycydcbiAgcHJpdmF0ZSBtYXhFcnJvcnMgPSAxMDBcbiAgcHJpdmF0ZSBtYXhBZ2UgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMCAvLyA3IGRheXNcblxuICBwcml2YXRlIGdldFN0b3JlZEVycm9ycygpOiBMb2dnZWRFcnJvcltdIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBbXVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0b3JlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuc3RvcmFnZUtleSlcbiAgICAgIGlmICghc3RvcmVkKSByZXR1cm4gW11cblxuICAgICAgY29uc3QgZXJyb3JzID0gSlNPTi5wYXJzZShzdG9yZWQpIGFzIExvZ2dlZEVycm9yW11cbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIG91dCBvbGQgZXJyb3JzXG4gICAgICBjb25zdCBjdXRvZmYgPSBEYXRlLm5vdygpIC0gdGhpcy5tYXhBZ2VcbiAgICAgIHJldHVybiBlcnJvcnMuZmlsdGVyKGVycm9yID0+IG5ldyBEYXRlKGVycm9yLnRpbWVzdGFtcCkuZ2V0VGltZSgpID4gY3V0b2ZmKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2FkIHN0b3JlZCBlcnJvcnM6JywgZXJyb3IpXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNhdmVFcnJvcnMoZXJyb3JzOiBMb2dnZWRFcnJvcltdKTogdm9pZCB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cblxuICAgIHRyeSB7XG4gICAgICAvLyBLZWVwIG9ubHkgdGhlIG1vc3QgcmVjZW50IGVycm9yc1xuICAgICAgY29uc3QgcmVjZW50RXJyb3JzID0gZXJyb3JzXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSlcbiAgICAgICAgLnNsaWNlKDAsIHRoaXMubWF4RXJyb3JzKVxuXG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLnN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KHJlY2VudEVycm9ycykpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIHNhdmUgZXJyb3JzIHRvIHN0b3JhZ2U6JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgYWRkRXJyb3IoZXJyb3I6IExvZ2dlZEVycm9yKTogdm9pZCB7XG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXRTdG9yZWRFcnJvcnMoKVxuICAgIGVycm9ycy5wdXNoKGVycm9yKVxuICAgIHRoaXMuc2F2ZUVycm9ycyhlcnJvcnMpXG4gIH1cblxuICBnZXRFcnJvcnMoKTogTG9nZ2VkRXJyb3JbXSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0U3RvcmVkRXJyb3JzKClcbiAgfVxuXG4gIGNsZWFyRXJyb3JzKCk6IHZvaWQge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5zdG9yYWdlS2V5KVxuICB9XG5cbiAgbWFya0Vycm9yUmVzb2x2ZWQoZXJyb3JJZDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXRTdG9yZWRFcnJvcnMoKVxuICAgIGNvbnN0IGVycm9yID0gZXJyb3JzLmZpbmQoZSA9PiBlLmlkID09PSBlcnJvcklkKVxuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IucmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLnNhdmVFcnJvcnMoZXJyb3JzKVxuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFUlJPUiBMT0dHRVIgQ0xBU1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgRXJyb3JMb2dnZXIge1xuICBwcml2YXRlIHN0b3JhZ2UgPSBuZXcgRXJyb3JTdG9yYWdlKClcbiAgcHJpdmF0ZSBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nXG4gIHByaXZhdGUgZW5hYmxlQ29uc29sZUxvZ2dpbmcgPSAhdGhpcy5pc1Byb2R1Y3Rpb25cblxuICBwcml2YXRlIGdlbmVyYXRlRXJyb3JJZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgZXJyXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuICB9XG5cbiAgcHJpdmF0ZSBnZXRFcnJvckNvbnRleHQoKTogRXJyb3JDb250ZXh0IHtcbiAgICBjb25zdCBjb250ZXh0OiBFcnJvckNvbnRleHQgPSB7XG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVybDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubG9jYXRpb24uaHJlZiA6IHVuZGVmaW5lZCxcbiAgICAgIHVzZXJBZ2VudDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IHVuZGVmaW5lZFxuICAgIH1cblxuICAgIC8vIFRyeSB0byBnZXQgc2Vzc2lvbiBJRCBmcm9tIHZhcmlvdXMgc291cmNlc1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbl9pZCcpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZXNzaW9uX2lkJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5jb29raWUubWF0Y2goL3Nlc3Npb25faWQ9KFteO10rKS8pPy5bMV1cbiAgICAgICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgICAgIGNvbnRleHQuc2Vzc2lvbklkID0gc2Vzc2lvbklkXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIElnbm9yZSBjb29raWUvc3RvcmFnZSBlcnJvcnNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29udGV4dFxuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRSZXBvcnRUb01vbml0b3JpbmcobGV2ZWw6IEVycm9yTGV2ZWwsIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5KTogYm9vbGVhbiB7XG4gICAgLy8gQWx3YXlzIHJlcG9ydCBlcnJvcnMgYW5kIHdhcm5pbmdzIGluIHByb2R1Y3Rpb25cbiAgICBpZiAodGhpcy5pc1Byb2R1Y3Rpb24gJiYgKGxldmVsID09PSAnZXJyb3InIHx8IGxldmVsID09PSAnd2FybmluZycpKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuICAgIC8vIFJlcG9ydCBjcml0aWNhbCBjYXRlZ29yaWVzIHJlZ2FyZGxlc3Mgb2YgZW52aXJvbm1lbnRcbiAgICBjb25zdCBjcml0aWNhbENhdGVnb3JpZXM6IEVycm9yQ2F0ZWdvcnlbXSA9IFsncGF5bWVudCcsICdzdHJpcGUnLCAnYXBpJ11cbiAgICByZXR1cm4gY3JpdGljYWxDYXRlZ29yaWVzLmluY2x1ZGVzKGNhdGVnb3J5KVxuICB9XG5cbiAgcHJpdmF0ZSByZXBvcnRUb01vbml0b3JpbmcoZXJyb3I6IExvZ2dlZEVycm9yKTogdm9pZCB7XG4gICAgLy8gSW4gYSByZWFsIGFwcGxpY2F0aW9uLCB0aGlzIHdvdWxkIHNlbmQgdG8gc2VydmljZXMgbGlrZTpcbiAgICAvLyAtIFNlbnRyeVxuICAgIC8vIC0gTG9nUm9ja2V0XG4gICAgLy8gLSBEYXRhRG9nXG4gICAgLy8gLSBDdXN0b20gbW9uaXRvcmluZyBlbmRwb2ludFxuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5ndGFnKSB7XG4gICAgICAvLyBSZXBvcnQgdG8gR29vZ2xlIEFuYWx5dGljcyBpZiBhdmFpbGFibGVcbiAgICAgIHdpbmRvdy5ndGFnKCdldmVudCcsICdleGNlcHRpb24nLCB7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBmYXRhbDogZXJyb3IubGV2ZWwgPT09ICdlcnJvcicsXG4gICAgICAgIGN1c3RvbV9tYXA6IHtcbiAgICAgICAgICBlcnJvcl9jYXRlZ29yeTogZXJyb3IuY2F0ZWdvcnksXG4gICAgICAgICAgZXJyb3JfaWQ6IGVycm9yLmlkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gRXhhbXBsZTogU2VuZCB0byBjdXN0b20gbW9uaXRvcmluZyBlbmRwb2ludFxuICAgIGlmICh0aGlzLmlzUHJvZHVjdGlvbikge1xuICAgICAgZmV0Y2goJy9hcGkvbW9uaXRvcmluZy9lcnJvcnMnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICBpZDogZXJyb3IuaWQsXG4gICAgICAgICAgICBsZXZlbDogZXJyb3IubGV2ZWwsXG4gICAgICAgICAgICBjYXRlZ29yeTogZXJyb3IuY2F0ZWdvcnksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgICAgICAgY29udGV4dDogZXJyb3IuY29udGV4dCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogZXJyb3IudGltZXN0YW1wXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gcmVwb3J0IGVycm9yIHRvIG1vbml0b3Jpbmc6JywgZXJyKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBsb2coXG4gICAgbGV2ZWw6IEVycm9yTGV2ZWwsXG4gICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnksXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGVycm9yPzogRXJyb3IsXG4gICAgYWRkaXRpb25hbENvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgZXJyb3JJZCA9IHRoaXMuZ2VuZXJhdGVFcnJvcklkKClcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgLi4udGhpcy5nZXRFcnJvckNvbnRleHQoKSxcbiAgICAgIC4uLmFkZGl0aW9uYWxDb250ZXh0XG4gICAgfVxuXG4gICAgY29uc3QgbG9nZ2VkRXJyb3I6IExvZ2dlZEVycm9yID0ge1xuICAgICAgaWQ6IGVycm9ySWQsXG4gICAgICBsZXZlbCxcbiAgICAgIGNhdGVnb3J5LFxuICAgICAgbWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvcj8uc3RhY2ssXG4gICAgICBjb250ZXh0LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICByZXNvbHZlZDogZmFsc2UsXG4gICAgICByZXBvcnRlZFRvTW9uaXRvcmluZzogZmFsc2VcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBlcnJvciBsb2NhbGx5XG4gICAgdGhpcy5zdG9yYWdlLmFkZEVycm9yKGxvZ2dlZEVycm9yKVxuXG4gICAgLy8gQ29uc29sZSBsb2dnaW5nIGZvciBkZXZlbG9wbWVudFxuICAgIGlmICh0aGlzLmVuYWJsZUNvbnNvbGVMb2dnaW5nKSB7XG4gICAgICBjb25zdCBjb25zb2xlTWV0aG9kID0gbGV2ZWwgPT09ICdlcnJvcicgPyAnZXJyb3InIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCA9PT0gJ3dhcm5pbmcnID8gJ3dhcm4nIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbCA9PT0gJ2luZm8nID8gJ2luZm8nIDogJ2xvZydcbiAgICAgIFxuICAgICAgY29uc29sZVtjb25zb2xlTWV0aG9kXShgWyR7Y2F0ZWdvcnkudG9VcHBlckNhc2UoKX1dICR7bWVzc2FnZX1gLCB7XG4gICAgICAgIGVycm9ySWQsXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIG9yaWdpbmFsRXJyb3I6IGVycm9yXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJlcG9ydCB0byBtb25pdG9yaW5nIGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLnNob3VsZFJlcG9ydFRvTW9uaXRvcmluZyhsZXZlbCwgY2F0ZWdvcnkpKSB7XG4gICAgICBsb2dnZWRFcnJvci5yZXBvcnRlZFRvTW9uaXRvcmluZyA9IHRydWVcbiAgICAgIHRoaXMucmVwb3J0VG9Nb25pdG9yaW5nKGxvZ2dlZEVycm9yKVxuICAgIH1cblxuICAgIHJldHVybiBlcnJvcklkXG4gIH1cblxuICBlcnJvcihjYXRlZ29yeTogRXJyb3JDYXRlZ29yeSwgbWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubG9nKCdlcnJvcicsIGNhdGVnb3J5LCBtZXNzYWdlLCBlcnJvciwgY29udGV4dClcbiAgfVxuXG4gIHdhcm5pbmcoY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnksIG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBFcnJvciwgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvZygnd2FybmluZycsIGNhdGVnb3J5LCBtZXNzYWdlLCBlcnJvciwgY29udGV4dClcbiAgfVxuXG4gIGluZm8oY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnksIG1lc3NhZ2U6IHN0cmluZywgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmxvZygnaW5mbycsIGNhdGVnb3J5LCBtZXNzYWdlLCB1bmRlZmluZWQsIGNvbnRleHQpXG4gIH1cblxuICBkZWJ1ZyhjYXRlZ29yeTogRXJyb3JDYXRlZ29yeSwgbWVzc2FnZTogc3RyaW5nLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMubG9nKCdkZWJ1ZycsIGNhdGVnb3J5LCBtZXNzYWdlLCB1bmRlZmluZWQsIGNvbnRleHQpXG4gIH1cblxuICBnZXRNZXRyaWNzKCk6IEVycm9yTWV0cmljcyB7XG4gICAgY29uc3QgZXJyb3JzID0gdGhpcy5zdG9yYWdlLmdldEVycm9ycygpXG4gICAgXG4gICAgY29uc3QgZXJyb3JzQnlDYXRlZ29yeTogUmVjb3JkPEVycm9yQ2F0ZWdvcnksIG51bWJlcj4gPSB7XG4gICAgICBwYXltZW50OiAwLFxuICAgICAgdmFsaWRhdGlvbjogMCxcbiAgICAgIG5ldHdvcms6IDAsXG4gICAgICBjYXJ0OiAwLFxuICAgICAgY2hlY2tvdXQ6IDAsXG4gICAgICBzdHJpcGU6IDAsXG4gICAgICBhcGk6IDAsXG4gICAgICB1aTogMCxcbiAgICAgIHVua25vd246IDBcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvcnNCeUxldmVsOiBSZWNvcmQ8RXJyb3JMZXZlbCwgbnVtYmVyPiA9IHtcbiAgICAgIGVycm9yOiAwLFxuICAgICAgd2FybmluZzogMCxcbiAgICAgIGluZm86IDAsXG4gICAgICBkZWJ1ZzogMFxuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2VDb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuXG4gICAgZXJyb3JzLmZvckVhY2goZXJyb3IgPT4ge1xuICAgICAgZXJyb3JzQnlDYXRlZ29yeVtlcnJvci5jYXRlZ29yeV0rK1xuICAgICAgZXJyb3JzQnlMZXZlbFtlcnJvci5sZXZlbF0rK1xuICAgICAgbWVzc2FnZUNvdW50c1tlcnJvci5tZXNzYWdlXSA9IChtZXNzYWdlQ291bnRzW2Vycm9yLm1lc3NhZ2VdIHx8IDApICsgMVxuICAgIH0pXG5cbiAgICBjb25zdCB0b3BFcnJvcnMgPSBPYmplY3QuZW50cmllcyhtZXNzYWdlQ291bnRzKVxuICAgICAgLnNvcnQoKFssIGFdLCBbLCBiXSkgPT4gYiAtIGEpXG4gICAgICAuc2xpY2UoMCwgMTApXG4gICAgICAubWFwKChbbWVzc2FnZSwgY291bnRdKSA9PiAoeyBtZXNzYWdlLCBjb3VudCB9KSlcblxuICAgIGNvbnN0IHJlY2VudEVycm9ycyA9IGVycm9yc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IG5ldyBEYXRlKGIudGltZXN0YW1wKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnRpbWVzdGFtcCkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKDAsIDIwKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsRXJyb3JzOiBlcnJvcnMubGVuZ3RoLFxuICAgICAgZXJyb3JzQnlDYXRlZ29yeSxcbiAgICAgIGVycm9yc0J5TGV2ZWwsXG4gICAgICByZWNlbnRFcnJvcnMsXG4gICAgICB0b3BFcnJvcnNcbiAgICB9XG4gIH1cblxuICBjbGVhckVycm9ycygpOiB2b2lkIHtcbiAgICB0aGlzLnN0b3JhZ2UuY2xlYXJFcnJvcnMoKVxuICB9XG5cbiAgbWFya1Jlc29sdmVkKGVycm9ySWQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RvcmFnZS5tYXJrRXJyb3JSZXNvbHZlZChlcnJvcklkKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNJTkdMRVRPTiBJTlNUQU5DRVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgZXJyb3JMb2dnZXIgPSBuZXcgRXJyb3JMb2dnZXIoKVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBDT05WRU5JRU5DRSBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBMb2dzIHBheW1lbnQtcmVsYXRlZCBlcnJvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ1BheW1lbnRFcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogRXJyb3IsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGVycm9yTG9nZ2VyLmVycm9yKCdwYXltZW50JywgbWVzc2FnZSwgZXJyb3IsIGNvbnRleHQpXG59XG5cbi8qKlxuICogTG9ncyBTdHJpcGUtcmVsYXRlZCBlcnJvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ1N0cmlwZUVycm9yID0gKG1lc3NhZ2U6IHN0cmluZywgZXJyb3I/OiBFcnJvciwgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcgPT4ge1xuICByZXR1cm4gZXJyb3JMb2dnZXIuZXJyb3IoJ3N0cmlwZScsIG1lc3NhZ2UsIGVycm9yLCBjb250ZXh0KVxufVxuXG4vKipcbiAqIExvZ3MgdmFsaWRhdGlvbiBlcnJvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ1ZhbGlkYXRpb25FcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGNvbnRleHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGVycm9yTG9nZ2VyLndhcm5pbmcoJ3ZhbGlkYXRpb24nLCBtZXNzYWdlLCB1bmRlZmluZWQsIGNvbnRleHQpXG59XG5cbi8qKlxuICogTG9ncyBjYXJ0LXJlbGF0ZWQgZXJyb3JzXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dDYXJ0RXJyb3IgPSAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBlcnJvckxvZ2dlci5lcnJvcignY2FydCcsIG1lc3NhZ2UsIGVycm9yLCBjb250ZXh0KVxufVxuXG4vKipcbiAqIExvZ3MgY2hlY2tvdXQtcmVsYXRlZCBlcnJvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ0NoZWNrb3V0RXJyb3IgPSAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBlcnJvckxvZ2dlci5lcnJvcignY2hlY2tvdXQnLCBtZXNzYWdlLCBlcnJvciwgY29udGV4dClcbn1cblxuLyoqXG4gKiBMb2dzIEFQSS1yZWxhdGVkIGVycm9yc1xuICovXG5leHBvcnQgY29uc3QgbG9nQXBpRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBlcnJvckxvZ2dlci5lcnJvcignYXBpJywgbWVzc2FnZSwgZXJyb3IsIGNvbnRleHQpXG59XG5cbi8qKlxuICogTG9ncyBuZXR3b3JrLXJlbGF0ZWQgZXJyb3JzXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dOZXR3b3JrRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBlcnJvckxvZ2dlci5lcnJvcignbmV0d29yaycsIG1lc3NhZ2UsIGVycm9yLCBjb250ZXh0KVxufVxuXG4vKipcbiAqIExvZ3MgVUktcmVsYXRlZCBlcnJvcnNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ1VJRXJyb3IgPSAobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IEVycm9yLCBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55Pik6IHN0cmluZyA9PiB7XG4gIHJldHVybiBlcnJvckxvZ2dlci53YXJuaW5nKCd1aScsIG1lc3NhZ2UsIGVycm9yLCBjb250ZXh0KVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBFUlJPUiBCT1VOREFSWSBJTlRFR1JBVElPTlxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIEZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBmcm9tIFJlYWN0IEVycm9yIEJvdW5kYXJpZXNcbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ1JlYWN0RXJyb3IgPSAoZXJyb3I6IEVycm9yLCBlcnJvckluZm86IHsgY29tcG9uZW50U3RhY2s6IHN0cmluZyB9KTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGVycm9yTG9nZ2VyLmVycm9yKCd1aScsIGBSZWFjdCBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWAsIGVycm9yLCB7XG4gICAgY29tcG9uZW50U3RhY2s6IGVycm9ySW5mby5jb21wb25lbnRTdGFjayxcbiAgICBlcnJvckJvdW5kYXJ5OiB0cnVlXG4gIH0pXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEdMT0JBTCBFUlJPUiBIQU5ETEVSU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFNldHMgdXAgZ2xvYmFsIGVycm9yIGhhbmRsZXJzIGZvciB1bmhhbmRsZWQgZXJyb3JzXG4gKi9cbmV4cG9ydCBjb25zdCBzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMgPSAoKTogdm9pZCA9PiB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuXG5cbiAgLy8gSGFuZGxlIHVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbnNcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VuaGFuZGxlZHJlamVjdGlvbicsIChldmVudCkgPT4ge1xuICAgIGVycm9yTG9nZ2VyLmVycm9yKCd1bmtub3duJywgYFVuaGFuZGxlZCBQcm9taXNlIFJlamVjdGlvbjogJHtldmVudC5yZWFzb259YCwgXG4gICAgICBldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IGV2ZW50LnJlYXNvbiA6IHVuZGVmaW5lZCwge1xuICAgICAgICB0eXBlOiAndW5oYW5kbGVkcmVqZWN0aW9uJyxcbiAgICAgICAgcHJvbWlzZTogZXZlbnQucHJvbWlzZVxuICAgICAgfSlcbiAgfSlcblxuICAvLyBIYW5kbGUgdW5jYXVnaHQgZXJyb3JzXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgIGVycm9yTG9nZ2VyLmVycm9yKCd1bmtub3duJywgYFVuY2F1Z2h0IEVycm9yOiAke2V2ZW50Lm1lc3NhZ2V9YCwgXG4gICAgICBldmVudC5lcnJvciwge1xuICAgICAgICB0eXBlOiAndW5jYXVnaHRFcnJvcicsXG4gICAgICAgIGZpbGVuYW1lOiBldmVudC5maWxlbmFtZSxcbiAgICAgICAgbGluZW5vOiBldmVudC5saW5lbm8sXG4gICAgICAgIGNvbG5vOiBldmVudC5jb2xub1xuICAgICAgfSlcbiAgfSlcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUEVSRk9STUFOQ0UgTU9OSVRPUklOR1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIExvZ3MgcGVyZm9ybWFuY2UgaXNzdWVzXG4gKi9cbmV4cG9ydCBjb25zdCBsb2dQZXJmb3JtYW5jZUlzc3VlID0gKG1ldHJpYzogc3RyaW5nLCB2YWx1ZTogbnVtYmVyLCB0aHJlc2hvbGQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICBpZiAodmFsdWUgPiB0aHJlc2hvbGQpIHtcbiAgICBlcnJvckxvZ2dlci53YXJuaW5nKCd1aScsIGBQZXJmb3JtYW5jZSBpc3N1ZTogJHttZXRyaWN9IHRvb2sgJHt2YWx1ZX1tcyAodGhyZXNob2xkOiAke3RocmVzaG9sZH1tcylgLCB1bmRlZmluZWQsIHtcbiAgICAgIG1ldHJpYyxcbiAgICAgIHZhbHVlLFxuICAgICAgdGhyZXNob2xkLFxuICAgICAgcGVyZm9ybWFuY2U6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbi8qKlxuICogTWVhc3VyZXMgYW5kIGxvZ3MgZnVuY3Rpb24gZXhlY3V0aW9uIHRpbWVcbiAqL1xuZXhwb3J0IGNvbnN0IG1lYXN1cmVQZXJmb3JtYW5jZSA9IDxUPihcbiAgbmFtZTogc3RyaW5nLCBcbiAgZm46ICgpID0+IFQsIFxuICB0aHJlc2hvbGQ6IG51bWJlciA9IDEwMDBcbik6IFQgPT4ge1xuICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpXG4gIGNvbnN0IHJlc3VsdCA9IGZuKClcbiAgY29uc3QgZHVyYXRpb24gPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0XG4gIFxuICBsb2dQZXJmb3JtYW5jZUlzc3VlKG5hbWUsIGR1cmF0aW9uLCB0aHJlc2hvbGQpXG4gIFxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTlNUQU5UU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgY29uc3QgRVJST1JfTE9HR0lOR19DT05TVEFOVFMgPSB7XG4gIE1BWF9TVE9SRURfRVJST1JTOiAxMDAsXG4gIE1BWF9FUlJPUl9BR0VfREFZUzogNyxcbiAgUEVSRk9STUFOQ0VfVEhSRVNIT0xEUzoge1xuICAgIEFQSV9DQUxMOiA1MDAwLFxuICAgIENPTVBPTkVOVF9SRU5ERVI6IDEwMCxcbiAgICBDQVJUX09QRVJBVElPTjogNTAwLFxuICAgIFBBWU1FTlRfT1BFUkFUSU9OOiAxMDAwMFxuICB9XG59IGFzIGNvbnN0XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEUgREVDTEFSQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgZ3RhZz86ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZFxuICB9XG59Il0sIm5hbWVzIjpbIkVycm9yU3RvcmFnZSIsImdldFN0b3JlZEVycm9ycyIsInN0b3JlZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzdG9yYWdlS2V5IiwiZXJyb3JzIiwiSlNPTiIsInBhcnNlIiwiY3V0b2ZmIiwiRGF0ZSIsIm5vdyIsIm1heEFnZSIsImZpbHRlciIsImVycm9yIiwidGltZXN0YW1wIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwic2F2ZUVycm9ycyIsInJlY2VudEVycm9ycyIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwibWF4RXJyb3JzIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImFkZEVycm9yIiwicHVzaCIsImdldEVycm9ycyIsImNsZWFyRXJyb3JzIiwicmVtb3ZlSXRlbSIsIm1hcmtFcnJvclJlc29sdmVkIiwiZXJyb3JJZCIsImZpbmQiLCJlIiwiaWQiLCJyZXNvbHZlZCIsIkVycm9yTG9nZ2VyIiwiZ2VuZXJhdGVFcnJvcklkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiZ2V0RXJyb3JDb250ZXh0IiwiY29udGV4dCIsInRvSVNPU3RyaW5nIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwidW5kZWZpbmVkIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwic2Vzc2lvbklkIiwic2Vzc2lvblN0b3JhZ2UiLCJkb2N1bWVudCIsImNvb2tpZSIsIm1hdGNoIiwic2hvdWxkUmVwb3J0VG9Nb25pdG9yaW5nIiwibGV2ZWwiLCJjYXRlZ29yeSIsImlzUHJvZHVjdGlvbiIsImNyaXRpY2FsQ2F0ZWdvcmllcyIsImluY2x1ZGVzIiwicmVwb3J0VG9Nb25pdG9yaW5nIiwiZ3RhZyIsImRlc2NyaXB0aW9uIiwibWVzc2FnZSIsImZhdGFsIiwiY3VzdG9tX21hcCIsImVycm9yX2NhdGVnb3J5IiwiZXJyb3JfaWQiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5Iiwic3RhY2siLCJjYXRjaCIsImVyciIsImxvZyIsImFkZGl0aW9uYWxDb250ZXh0IiwibG9nZ2VkRXJyb3IiLCJyZXBvcnRlZFRvTW9uaXRvcmluZyIsInN0b3JhZ2UiLCJlbmFibGVDb25zb2xlTG9nZ2luZyIsImNvbnNvbGVNZXRob2QiLCJ0b1VwcGVyQ2FzZSIsIm9yaWdpbmFsRXJyb3IiLCJ3YXJuaW5nIiwiaW5mbyIsImRlYnVnIiwiZ2V0TWV0cmljcyIsImVycm9yc0J5Q2F0ZWdvcnkiLCJwYXltZW50IiwidmFsaWRhdGlvbiIsIm5ldHdvcmsiLCJjYXJ0IiwiY2hlY2tvdXQiLCJzdHJpcGUiLCJhcGkiLCJ1aSIsInVua25vd24iLCJlcnJvcnNCeUxldmVsIiwibWVzc2FnZUNvdW50cyIsImZvckVhY2giLCJ0b3BFcnJvcnMiLCJPYmplY3QiLCJlbnRyaWVzIiwibWFwIiwiY291bnQiLCJ0b3RhbEVycm9ycyIsImxlbmd0aCIsIm1hcmtSZXNvbHZlZCIsInByb2Nlc3MiLCJlcnJvckxvZ2dlciIsImxvZ1BheW1lbnRFcnJvciIsImxvZ1N0cmlwZUVycm9yIiwibG9nVmFsaWRhdGlvbkVycm9yIiwibG9nQ2FydEVycm9yIiwibG9nQ2hlY2tvdXRFcnJvciIsImxvZ0FwaUVycm9yIiwibG9nTmV0d29ya0Vycm9yIiwibG9nVUlFcnJvciIsImxvZ1JlYWN0RXJyb3IiLCJlcnJvckluZm8iLCJjb21wb25lbnRTdGFjayIsImVycm9yQm91bmRhcnkiLCJzZXR1cEdsb2JhbEVycm9ySGFuZGxlcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJyZWFzb24iLCJFcnJvciIsInR5cGUiLCJwcm9taXNlIiwiZmlsZW5hbWUiLCJsaW5lbm8iLCJjb2xubyIsImxvZ1BlcmZvcm1hbmNlSXNzdWUiLCJtZXRyaWMiLCJ2YWx1ZSIsInRocmVzaG9sZCIsInBlcmZvcm1hbmNlIiwibWVhc3VyZVBlcmZvcm1hbmNlIiwibmFtZSIsImZuIiwic3RhcnQiLCJyZXN1bHQiLCJkdXJhdGlvbiIsIkVSUk9SX0xPR0dJTkdfQ09OU1RBTlRTIiwiTUFYX1NUT1JFRF9FUlJPUlMiLCJNQVhfRVJST1JfQUdFX0RBWVMiLCJQRVJGT1JNQU5DRV9USFJFU0hPTERTIiwiQVBJX0NBTEwiLCJDT01QT05FTlRfUkVOREVSIiwiQ0FSVF9PUEVSQVRJT04iLCJQQVlNRU5UX09QRVJBVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/error-logging.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/monitoring.ts":
/*!*******************************!*\
  !*** ./src/lib/monitoring.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   businessMetrics: () => (/* binding */ businessMetrics),\n/* harmony export */   getMonitoringDashboard: () => (/* binding */ getMonitoringDashboard),\n/* harmony export */   healthMonitor: () => (/* binding */ healthMonitor),\n/* harmony export */   initializeMonitoring: () => (/* binding */ initializeMonitoring),\n/* harmony export */   measureTime: () => (/* binding */ measureTime),\n/* harmony export */   paymentMonitor: () => (/* binding */ paymentMonitor),\n/* harmony export */   performanceMonitor: () => (/* binding */ performanceMonitor),\n/* harmony export */   recordBusiness: () => (/* binding */ recordBusiness),\n/* harmony export */   recordHealth: () => (/* binding */ recordHealth),\n/* harmony export */   recordPerformance: () => (/* binding */ recordPerformance),\n/* harmony export */   trackPayment: () => (/* binding */ trackPayment)\n/* harmony export */ });\n/* harmony import */ var _lib_environment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/environment */ \"(rsc)/./src/lib/environment.ts\");\n/* harmony import */ var _lib_error_logging__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/error-logging */ \"(rsc)/./src/lib/error-logging.ts\");\n/**\n * Production monitoring and logging system\n * Handles performance monitoring, error tracking, and analytics\n */ \n\n// ============================================================================\n// PAYMENT EVENT TRACKING\n// ============================================================================\nclass PaymentMonitor {\n    /**\n   * Tracks a payment event\n   */ trackPaymentEvent(event) {\n        if (!(0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.isFeatureEnabled)(\"analytics\")) {\n            return;\n        }\n        const paymentEvent = {\n            ...event,\n            timestamp: new Date().toISOString()\n        };\n        // Store locally\n        this.events.push(paymentEvent);\n        if (this.events.length > this.maxEvents) {\n            this.events.shift();\n        }\n        // Send to external analytics\n        this.sendToAnalytics(paymentEvent);\n        // Log critical events\n        if (event.type === \"payment_failed\") {\n            _lib_error_logging__WEBPACK_IMPORTED_MODULE_1__.errorLogger.error(\"payment\", `Payment failed: ${event.errorMessage}`, undefined, {\n                sessionId: event.sessionId,\n                orderId: event.orderId,\n                amount: event.amount,\n                errorCode: event.errorCode\n            });\n        }\n    }\n    /**\n   * Gets payment events for analysis\n   */ getPaymentEvents(limit = 100) {\n        return this.events.slice(-limit);\n    }\n    /**\n   * Gets payment metrics\n   */ getPaymentMetrics() {\n        const total = this.events.length;\n        const successful = this.events.filter((e)=>e.type === \"payment_succeeded\").length;\n        const failed = this.events.filter((e)=>e.type === \"payment_failed\").length;\n        const cancelled = this.events.filter((e)=>e.type === \"payment_cancelled\").length;\n        const successRate = total > 0 ? successful / total * 100 : 0;\n        const amounts = this.events.filter((e)=>e.amount && e.type === \"payment_succeeded\").map((e)=>e.amount);\n        const averageAmount = amounts.length > 0 ? amounts.reduce((sum, amount)=>sum + amount, 0) / amounts.length : 0;\n        return {\n            totalPayments: total,\n            successfulPayments: successful,\n            failedPayments: failed,\n            cancelledPayments: cancelled,\n            successRate,\n            averageAmount\n        };\n    }\n    /**\n   * Sends event to external analytics services\n   */ sendToAnalytics(event) {\n        if (!(0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.isFeatureEnabled)(\"analytics\")) {\n            return;\n        }\n        // Google Analytics 4\n        if (false) {}\n        // Send to custom analytics endpoint\n        if (typeof fetch !== \"undefined\") {\n            fetch(\"/api/analytics/events\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    event\n                })\n            }).catch((error)=>{\n                console.warn(\"Failed to send analytics event:\", error);\n            });\n        }\n    }\n    constructor(){\n        this.events = [];\n        this.maxEvents = 1000;\n    }\n}\n// ============================================================================\n// PERFORMANCE MONITORING\n// ============================================================================\nclass PerformanceMonitor {\n    /**\n   * Records a performance metric\n   */ recordMetric(metric) {\n        if (!(0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.isFeatureEnabled)(\"performance-monitoring\")) {\n            return;\n        }\n        const performanceMetric = {\n            ...metric,\n            timestamp: new Date().toISOString()\n        };\n        this.metrics.push(performanceMetric);\n        if (this.metrics.length > this.maxMetrics) {\n            this.metrics.shift();\n        }\n        // Send to monitoring service\n        this.sendToMonitoring(performanceMetric);\n        // Alert on performance issues\n        this.checkPerformanceThresholds(performanceMetric);\n    }\n    /**\n   * Measures execution time of a function\n   */ measureExecutionTime(name, fn, tags) {\n        const start = performance.now();\n        const finish = (result)=>{\n            const duration = performance.now() - start;\n            this.recordMetric({\n                name,\n                value: duration,\n                unit: \"ms\",\n                tags\n            });\n            return result;\n        };\n        try {\n            const result = fn();\n            if (result instanceof Promise) {\n                return result.then(finish).catch((error)=>{\n                    finish(error);\n                    throw error;\n                });\n            }\n            return finish(result);\n        } catch (error) {\n            finish(error);\n            throw error;\n        }\n    }\n    /**\n   * Gets performance metrics\n   */ getMetrics(name, limit = 100) {\n        let filtered = this.metrics;\n        if (name) {\n            filtered = filtered.filter((m)=>m.name === name);\n        }\n        return filtered.slice(-limit);\n    }\n    /**\n   * Gets performance summary\n   */ getPerformanceSummary() {\n        const summary = {};\n        // Group metrics by name\n        const grouped = this.metrics.reduce((acc, metric)=>{\n            if (!acc[metric.name]) {\n                acc[metric.name] = [];\n            }\n            acc[metric.name].push(metric.value);\n            return acc;\n        }, {});\n        // Calculate statistics for each metric\n        Object.entries(grouped).forEach(([name, values])=>{\n            const sorted = values.sort((a, b)=>a - b);\n            const count = values.length;\n            const sum = values.reduce((a, b)=>a + b, 0);\n            summary[name] = {\n                count,\n                average: sum / count,\n                min: sorted[0],\n                max: sorted[sorted.length - 1],\n                p95: sorted[Math.floor(sorted.length * 0.95)]\n            };\n        });\n        return summary;\n    }\n    /**\n   * Sends metric to monitoring service\n   */ sendToMonitoring(metric) {\n        // Send to monitoring service (e.g., DataDog, New Relic)\n        if (typeof fetch !== \"undefined\") {\n            fetch(\"/api/monitoring/metrics\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    metric\n                })\n            }).catch((error)=>{\n                console.warn(\"Failed to send performance metric:\", error);\n            });\n        }\n    }\n    /**\n   * Checks performance thresholds and alerts\n   */ checkPerformanceThresholds(metric) {\n        const thresholds = {\n            \"api_response_time\": 5000,\n            \"checkout_session_creation\": 10000,\n            \"stripe_redirect\": 3000,\n            \"cart_operation\": 1000,\n            \"page_load\": 3000 // 3 seconds\n        };\n        const threshold = thresholds[metric.name];\n        if (threshold && metric.value > threshold) {\n            _lib_error_logging__WEBPACK_IMPORTED_MODULE_1__.errorLogger.warning(\"ui\", `Performance threshold exceeded: ${metric.name} took ${metric.value}ms (threshold: ${threshold}ms)`, undefined, {\n                metric: metric.name,\n                value: metric.value,\n                threshold,\n                tags: metric.tags\n            });\n        }\n    }\n    constructor(){\n        this.metrics = [];\n        this.maxMetrics = 1000;\n    }\n}\n// ============================================================================\n// HEALTH MONITORING\n// ============================================================================\nclass HealthMonitor {\n    /**\n   * Records a health check result\n   */ recordHealthCheck(check) {\n        const healthCheck = {\n            ...check,\n            timestamp: new Date().toISOString()\n        };\n        this.checks.push(healthCheck);\n        if (this.checks.length > this.maxChecks) {\n            this.checks.shift();\n        }\n        // Alert on unhealthy services\n        if (check.status === \"unhealthy\") {\n            _lib_error_logging__WEBPACK_IMPORTED_MODULE_1__.errorLogger.error(\"api\", `Service unhealthy: ${check.service}`, undefined, {\n                service: check.service,\n                error: check.error,\n                responseTime: check.responseTime\n            });\n        }\n    }\n    /**\n   * Gets health check results\n   */ getHealthChecks(service, limit = 50) {\n        let filtered = this.checks;\n        if (service) {\n            filtered = filtered.filter((c)=>c.service === service);\n        }\n        return filtered.slice(-limit);\n    }\n    /**\n   * Gets overall system health\n   */ getSystemHealth() {\n        const services = {};\n        // Get latest check for each service\n        const latestChecks = this.checks.reduce((acc, check)=>{\n            if (!acc[check.service] || check.timestamp > acc[check.service].timestamp) {\n                acc[check.service] = check;\n            }\n            return acc;\n        }, {});\n        // Calculate service health\n        Object.entries(latestChecks).forEach(([service, check])=>{\n            const serviceChecks = this.checks.filter((c)=>c.service === service);\n            const healthyChecks = serviceChecks.filter((c)=>c.status === \"healthy\").length;\n            const uptime = serviceChecks.length > 0 ? healthyChecks / serviceChecks.length * 100 : 0;\n            services[service] = {\n                status: check.status,\n                lastCheck: check.timestamp,\n                uptime\n            };\n        });\n        // Determine overall system status\n        const serviceStatuses = Object.values(services).map((s)=>s.status);\n        const overallStatus = serviceStatuses.includes(\"unhealthy\") ? \"unhealthy\" : serviceStatuses.includes(\"degraded\") ? \"degraded\" : \"healthy\";\n        return {\n            status: overallStatus,\n            services\n        };\n    }\n    constructor(){\n        this.checks = [];\n        this.maxChecks = 100;\n    }\n}\n// ============================================================================\n// BUSINESS METRICS\n// ============================================================================\nclass BusinessMetricsMonitor {\n    /**\n   * Records a business metric\n   */ recordMetric(metric) {\n        if (!(0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.isFeatureEnabled)(\"analytics\")) {\n            return;\n        }\n        const businessMetric = {\n            ...metric,\n            timestamp: new Date().toISOString()\n        };\n        this.metrics.push(businessMetric);\n        if (this.metrics.length > this.maxMetrics) {\n            this.metrics.shift();\n        }\n        // Send to analytics\n        this.sendToAnalytics(businessMetric);\n    }\n    /**\n   * Gets business metrics\n   */ getMetrics(name, timeRange) {\n        let filtered = this.metrics;\n        if (name) {\n            filtered = filtered.filter((m)=>m.name === name);\n        }\n        if (timeRange) {\n            filtered = filtered.filter((m)=>m.timestamp >= timeRange.start && m.timestamp <= timeRange.end);\n        }\n        return filtered;\n    }\n    /**\n   * Gets revenue metrics\n   */ getRevenueMetrics() {\n        const revenueMetrics = this.metrics.filter((m)=>m.name === \"revenue\");\n        const orderMetrics = this.metrics.filter((m)=>m.name === \"order_completed\");\n        const sessionMetrics = this.metrics.filter((m)=>m.name === \"session_started\");\n        const totalRevenue = revenueMetrics.reduce((sum, m)=>sum + m.value, 0);\n        const totalOrders = orderMetrics.length;\n        const totalSessions = sessionMetrics.length;\n        const averageOrderValue = totalOrders > 0 ? totalRevenue / totalOrders : 0;\n        const conversionRate = totalSessions > 0 ? totalOrders / totalSessions * 100 : 0;\n        // Calculate top products\n        const productRevenue = {};\n        orderMetrics.forEach((metric)=>{\n            const productName = metric.dimensions?.product_name || \"Unknown\";\n            const revenue = metric.value || 0;\n            if (!productRevenue[productName]) {\n                productRevenue[productName] = {\n                    revenue: 0,\n                    orders: 0\n                };\n            }\n            productRevenue[productName].revenue += revenue;\n            productRevenue[productName].orders += 1;\n        });\n        const topProducts = Object.entries(productRevenue).map(([name, data])=>({\n                name,\n                ...data\n            })).sort((a, b)=>b.revenue - a.revenue).slice(0, 10);\n        return {\n            totalRevenue,\n            averageOrderValue,\n            conversionRate,\n            topProducts\n        };\n    }\n    /**\n   * Sends metric to analytics\n   */ sendToAnalytics(metric) {\n        // Send to analytics service\n        if (typeof fetch !== \"undefined\") {\n            fetch(\"/api/analytics/business-metrics\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    metric\n                })\n            }).catch((error)=>{\n                console.warn(\"Failed to send business metric:\", error);\n            });\n        }\n    }\n    constructor(){\n        this.metrics = [];\n        this.maxMetrics = 1000;\n    }\n}\n// ============================================================================\n// SINGLETON INSTANCES\n// ============================================================================\nconst paymentMonitor = new PaymentMonitor();\nconst performanceMonitor = new PerformanceMonitor();\nconst healthMonitor = new HealthMonitor();\nconst businessMetrics = new BusinessMetricsMonitor();\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n/**\n * Tracks a payment event\n */ const trackPayment = (event)=>{\n    paymentMonitor.trackPaymentEvent(event);\n};\n/**\n * Records a performance metric\n */ const recordPerformance = (metric)=>{\n    performanceMonitor.recordMetric(metric);\n};\n/**\n * Measures function execution time\n */ const measureTime = (name, fn, tags)=>{\n    return performanceMonitor.measureExecutionTime(name, fn, tags);\n};\n/**\n * Records a health check\n */ const recordHealth = (check)=>{\n    healthMonitor.recordHealthCheck(check);\n};\n/**\n * Records a business metric\n */ const recordBusiness = (metric)=>{\n    businessMetrics.recordMetric(metric);\n};\n// ============================================================================\n// MONITORING DASHBOARD DATA\n// ============================================================================\n/**\n * Gets comprehensive monitoring data for dashboard\n */ const getMonitoringDashboard = ()=>{\n    return {\n        timestamp: new Date().toISOString(),\n        environment: (0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.getConfig)(),\n        payment: paymentMonitor.getPaymentMetrics(),\n        performance: performanceMonitor.getPerformanceSummary(),\n        health: healthMonitor.getSystemHealth(),\n        business: businessMetrics.getRevenueMetrics(),\n        errors: _lib_error_logging__WEBPACK_IMPORTED_MODULE_1__.errorLogger.getMetrics()\n    };\n};\n// ============================================================================\n// INITIALIZATION\n// ============================================================================\n/**\n * Initializes monitoring system\n */ const initializeMonitoring = ()=>{\n    const config = (0,_lib_environment__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\n    if (config.isProduction) {\n        console.log(\"\\uD83D\\uDD0D Initializing production monitoring...\");\n        // Set up periodic health checks\n        setInterval(()=>{\n            // Check Stripe connectivity\n            fetch(\"/api/health\").then((response)=>{\n                recordHealth({\n                    service: \"api\",\n                    status: response.ok ? \"healthy\" : \"unhealthy\",\n                    responseTime: performance.now()\n                });\n            }).catch((error)=>{\n                recordHealth({\n                    service: \"api\",\n                    status: \"unhealthy\",\n                    error: error.message\n                });\n            });\n        }, 60000) // Every minute\n        ;\n        console.log(\"✅ Production monitoring initialized\");\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bXktdGVjaC1nbGFzc2VzLy4vc3JjL2xpYi9tb25pdG9yaW5nLnRzPzc2ZGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQcm9kdWN0aW9uIG1vbml0b3JpbmcgYW5kIGxvZ2dpbmcgc3lzdGVtXG4gKiBIYW5kbGVzIHBlcmZvcm1hbmNlIG1vbml0b3JpbmcsIGVycm9yIHRyYWNraW5nLCBhbmQgYW5hbHl0aWNzXG4gKi9cblxuaW1wb3J0IHsgZ2V0Q29uZmlnLCBpc0ZlYXR1cmVFbmFibGVkIH0gZnJvbSAnQC9saWIvZW52aXJvbm1lbnQnXG5pbXBvcnQgeyBlcnJvckxvZ2dlciB9IGZyb20gJ0AvbGliL2Vycm9yLWxvZ2dpbmcnXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEVTIEFORCBJTlRFUkZBQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGF5bWVudEV2ZW50IHtcbiAgdHlwZTogJ3BheW1lbnRfaW5pdGlhdGVkJyB8ICdwYXltZW50X3N1Y2NlZWRlZCcgfCAncGF5bWVudF9mYWlsZWQnIHwgJ3BheW1lbnRfY2FuY2VsbGVkJ1xuICBzZXNzaW9uSWQ/OiBzdHJpbmdcbiAgb3JkZXJJZD86IHN0cmluZ1xuICBhbW91bnQ/OiBudW1iZXJcbiAgY3VycmVuY3k/OiBzdHJpbmdcbiAgcGF5bWVudE1ldGhvZD86IHN0cmluZ1xuICBlcnJvckNvZGU/OiBzdHJpbmdcbiAgZXJyb3JNZXNzYWdlPzogc3RyaW5nXG4gIGN1c3RvbWVyRW1haWw/OiBzdHJpbmdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgbWV0YWRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VNZXRyaWMge1xuICBuYW1lOiBzdHJpbmdcbiAgdmFsdWU6IG51bWJlclxuICB1bml0OiAnbXMnIHwgJ2J5dGVzJyB8ICdjb3VudCcgfCAncGVyY2VudGFnZSdcbiAgdGltZXN0YW1wOiBzdHJpbmdcbiAgdGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCdXNpbmVzc01ldHJpYyB7XG4gIG5hbWU6IHN0cmluZ1xuICB2YWx1ZTogbnVtYmVyXG4gIHRpbWVzdGFtcDogc3RyaW5nXG4gIGRpbWVuc2lvbnM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhbHRoQ2hlY2sge1xuICBzZXJ2aWNlOiBzdHJpbmdcbiAgc3RhdHVzOiAnaGVhbHRoeScgfCAndW5oZWFsdGh5JyB8ICdkZWdyYWRlZCdcbiAgcmVzcG9uc2VUaW1lPzogbnVtYmVyXG4gIGVycm9yPzogc3RyaW5nXG4gIHRpbWVzdGFtcDogc3RyaW5nXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBBWU1FTlQgRVZFTlQgVFJBQ0tJTkdcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgUGF5bWVudE1vbml0b3Ige1xuICBwcml2YXRlIGV2ZW50czogUGF5bWVudEV2ZW50W10gPSBbXVxuICBwcml2YXRlIG1heEV2ZW50cyA9IDEwMDBcblxuICAvKipcbiAgICogVHJhY2tzIGEgcGF5bWVudCBldmVudFxuICAgKi9cbiAgdHJhY2tQYXltZW50RXZlbnQoZXZlbnQ6IE9taXQ8UGF5bWVudEV2ZW50LCAndGltZXN0YW1wJz4pOiB2b2lkIHtcbiAgICBpZiAoIWlzRmVhdHVyZUVuYWJsZWQoJ2FuYWx5dGljcycpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBwYXltZW50RXZlbnQ6IFBheW1lbnRFdmVudCA9IHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBsb2NhbGx5XG4gICAgdGhpcy5ldmVudHMucHVzaChwYXltZW50RXZlbnQpXG4gICAgaWYgKHRoaXMuZXZlbnRzLmxlbmd0aCA+IHRoaXMubWF4RXZlbnRzKSB7XG4gICAgICB0aGlzLmV2ZW50cy5zaGlmdCgpXG4gICAgfVxuXG4gICAgLy8gU2VuZCB0byBleHRlcm5hbCBhbmFseXRpY3NcbiAgICB0aGlzLnNlbmRUb0FuYWx5dGljcyhwYXltZW50RXZlbnQpXG5cbiAgICAvLyBMb2cgY3JpdGljYWwgZXZlbnRzXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwYXltZW50X2ZhaWxlZCcpIHtcbiAgICAgIGVycm9yTG9nZ2VyLmVycm9yKCdwYXltZW50JywgYFBheW1lbnQgZmFpbGVkOiAke2V2ZW50LmVycm9yTWVzc2FnZX1gLCB1bmRlZmluZWQsIHtcbiAgICAgICAgc2Vzc2lvbklkOiBldmVudC5zZXNzaW9uSWQsXG4gICAgICAgIG9yZGVySWQ6IGV2ZW50Lm9yZGVySWQsXG4gICAgICAgIGFtb3VudDogZXZlbnQuYW1vdW50LFxuICAgICAgICBlcnJvckNvZGU6IGV2ZW50LmVycm9yQ29kZVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBwYXltZW50IGV2ZW50cyBmb3IgYW5hbHlzaXNcbiAgICovXG4gIGdldFBheW1lbnRFdmVudHMobGltaXQ6IG51bWJlciA9IDEwMCk6IFBheW1lbnRFdmVudFtdIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudHMuc2xpY2UoLWxpbWl0KVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcGF5bWVudCBtZXRyaWNzXG4gICAqL1xuICBnZXRQYXltZW50TWV0cmljcygpOiB7XG4gICAgdG90YWxQYXltZW50czogbnVtYmVyXG4gICAgc3VjY2Vzc2Z1bFBheW1lbnRzOiBudW1iZXJcbiAgICBmYWlsZWRQYXltZW50czogbnVtYmVyXG4gICAgY2FuY2VsbGVkUGF5bWVudHM6IG51bWJlclxuICAgIHN1Y2Nlc3NSYXRlOiBudW1iZXJcbiAgICBhdmVyYWdlQW1vdW50OiBudW1iZXJcbiAgfSB7XG4gICAgY29uc3QgdG90YWwgPSB0aGlzLmV2ZW50cy5sZW5ndGhcbiAgICBjb25zdCBzdWNjZXNzZnVsID0gdGhpcy5ldmVudHMuZmlsdGVyKGUgPT4gZS50eXBlID09PSAncGF5bWVudF9zdWNjZWVkZWQnKS5sZW5ndGhcbiAgICBjb25zdCBmYWlsZWQgPSB0aGlzLmV2ZW50cy5maWx0ZXIoZSA9PiBlLnR5cGUgPT09ICdwYXltZW50X2ZhaWxlZCcpLmxlbmd0aFxuICAgIGNvbnN0IGNhbmNlbGxlZCA9IHRoaXMuZXZlbnRzLmZpbHRlcihlID0+IGUudHlwZSA9PT0gJ3BheW1lbnRfY2FuY2VsbGVkJykubGVuZ3RoXG4gICAgXG4gICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSB0b3RhbCA+IDAgPyAoc3VjY2Vzc2Z1bCAvIHRvdGFsKSAqIDEwMCA6IDBcbiAgICBcbiAgICBjb25zdCBhbW91bnRzID0gdGhpcy5ldmVudHNcbiAgICAgIC5maWx0ZXIoZSA9PiBlLmFtb3VudCAmJiBlLnR5cGUgPT09ICdwYXltZW50X3N1Y2NlZWRlZCcpXG4gICAgICAubWFwKGUgPT4gZS5hbW91bnQhKVxuICAgIGNvbnN0IGF2ZXJhZ2VBbW91bnQgPSBhbW91bnRzLmxlbmd0aCA+IDAgXG4gICAgICA/IGFtb3VudHMucmVkdWNlKChzdW0sIGFtb3VudCkgPT4gc3VtICsgYW1vdW50LCAwKSAvIGFtb3VudHMubGVuZ3RoIFxuICAgICAgOiAwXG5cbiAgICByZXR1cm4ge1xuICAgICAgdG90YWxQYXltZW50czogdG90YWwsXG4gICAgICBzdWNjZXNzZnVsUGF5bWVudHM6IHN1Y2Nlc3NmdWwsXG4gICAgICBmYWlsZWRQYXltZW50czogZmFpbGVkLFxuICAgICAgY2FuY2VsbGVkUGF5bWVudHM6IGNhbmNlbGxlZCxcbiAgICAgIHN1Y2Nlc3NSYXRlLFxuICAgICAgYXZlcmFnZUFtb3VudFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kcyBldmVudCB0byBleHRlcm5hbCBhbmFseXRpY3Mgc2VydmljZXNcbiAgICovXG4gIHByaXZhdGUgc2VuZFRvQW5hbHl0aWNzKGV2ZW50OiBQYXltZW50RXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIWlzRmVhdHVyZUVuYWJsZWQoJ2FuYWx5dGljcycpKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBHb29nbGUgQW5hbHl0aWNzIDRcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmd0YWcpIHtcbiAgICAgIHdpbmRvdy5ndGFnKCdldmVudCcsIGV2ZW50LnR5cGUsIHtcbiAgICAgICAgZXZlbnRfY2F0ZWdvcnk6ICdwYXltZW50JyxcbiAgICAgICAgZXZlbnRfbGFiZWw6IGV2ZW50LnNlc3Npb25JZCxcbiAgICAgICAgdmFsdWU6IGV2ZW50LmFtb3VudCxcbiAgICAgICAgY3VzdG9tX21hcDoge1xuICAgICAgICAgIG9yZGVyX2lkOiBldmVudC5vcmRlcklkLFxuICAgICAgICAgIHBheW1lbnRfbWV0aG9kOiBldmVudC5wYXltZW50TWV0aG9kLFxuICAgICAgICAgIGN1cnJlbmN5OiBldmVudC5jdXJyZW5jeVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNlbmQgdG8gY3VzdG9tIGFuYWx5dGljcyBlbmRwb2ludFxuICAgIGlmICh0eXBlb2YgZmV0Y2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmZXRjaCgnL2FwaS9hbmFseXRpY3MvZXZlbnRzJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZXZlbnQgfSlcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2VuZCBhbmFseXRpY3MgZXZlbnQ6JywgZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBQRVJGT1JNQU5DRSBNT05JVE9SSU5HXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmNsYXNzIFBlcmZvcm1hbmNlTW9uaXRvciB7XG4gIHByaXZhdGUgbWV0cmljczogUGVyZm9ybWFuY2VNZXRyaWNbXSA9IFtdXG4gIHByaXZhdGUgbWF4TWV0cmljcyA9IDEwMDBcblxuICAvKipcbiAgICogUmVjb3JkcyBhIHBlcmZvcm1hbmNlIG1ldHJpY1xuICAgKi9cbiAgcmVjb3JkTWV0cmljKG1ldHJpYzogT21pdDxQZXJmb3JtYW5jZU1ldHJpYywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgaWYgKCFpc0ZlYXR1cmVFbmFibGVkKCdwZXJmb3JtYW5jZS1tb25pdG9yaW5nJykpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IHBlcmZvcm1hbmNlTWV0cmljOiBQZXJmb3JtYW5jZU1ldHJpYyA9IHtcbiAgICAgIC4uLm1ldHJpYyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfVxuXG4gICAgdGhpcy5tZXRyaWNzLnB1c2gocGVyZm9ybWFuY2VNZXRyaWMpXG4gICAgaWYgKHRoaXMubWV0cmljcy5sZW5ndGggPiB0aGlzLm1heE1ldHJpY3MpIHtcbiAgICAgIHRoaXMubWV0cmljcy5zaGlmdCgpXG4gICAgfVxuXG4gICAgLy8gU2VuZCB0byBtb25pdG9yaW5nIHNlcnZpY2VcbiAgICB0aGlzLnNlbmRUb01vbml0b3JpbmcocGVyZm9ybWFuY2VNZXRyaWMpXG5cbiAgICAvLyBBbGVydCBvbiBwZXJmb3JtYW5jZSBpc3N1ZXNcbiAgICB0aGlzLmNoZWNrUGVyZm9ybWFuY2VUaHJlc2hvbGRzKHBlcmZvcm1hbmNlTWV0cmljKVxuICB9XG5cbiAgLyoqXG4gICAqIE1lYXN1cmVzIGV4ZWN1dGlvbiB0aW1lIG9mIGEgZnVuY3Rpb25cbiAgICovXG4gIG1lYXN1cmVFeGVjdXRpb25UaW1lPFQ+KFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBmbjogKCkgPT4gVCB8IFByb21pc2U8VD4sXG4gICAgdGFncz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cbiAgKTogVCB8IFByb21pc2U8VD4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KClcblxuICAgIGNvbnN0IGZpbmlzaCA9IChyZXN1bHQ6IFQpID0+IHtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFxuICAgICAgdGhpcy5yZWNvcmRNZXRyaWMoe1xuICAgICAgICBuYW1lLFxuICAgICAgICB2YWx1ZTogZHVyYXRpb24sXG4gICAgICAgIHVuaXQ6ICdtcycsXG4gICAgICAgIHRhZ3NcbiAgICAgIH0pXG4gICAgICByZXR1cm4gcmVzdWx0XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKClcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKGZpbmlzaCkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGZpbmlzaChlcnJvcilcbiAgICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gZmluaXNoKHJlc3VsdClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgZmluaXNoKGVycm9yIGFzIFQpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHBlcmZvcm1hbmNlIG1ldHJpY3NcbiAgICovXG4gIGdldE1ldHJpY3MobmFtZT86IHN0cmluZywgbGltaXQ6IG51bWJlciA9IDEwMCk6IFBlcmZvcm1hbmNlTWV0cmljW10ge1xuICAgIGxldCBmaWx0ZXJlZCA9IHRoaXMubWV0cmljc1xuICAgIFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihtID0+IG0ubmFtZSA9PT0gbmFtZSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkLnNsaWNlKC1saW1pdClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHBlcmZvcm1hbmNlIHN1bW1hcnlcbiAgICovXG4gIGdldFBlcmZvcm1hbmNlU3VtbWFyeSgpOiBSZWNvcmQ8c3RyaW5nLCB7XG4gICAgY291bnQ6IG51bWJlclxuICAgIGF2ZXJhZ2U6IG51bWJlclxuICAgIG1pbjogbnVtYmVyXG4gICAgbWF4OiBudW1iZXJcbiAgICBwOTU6IG51bWJlclxuICB9PiB7XG4gICAgY29uc3Qgc3VtbWFyeTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9XG5cbiAgICAvLyBHcm91cCBtZXRyaWNzIGJ5IG5hbWVcbiAgICBjb25zdCBncm91cGVkID0gdGhpcy5tZXRyaWNzLnJlZHVjZSgoYWNjLCBtZXRyaWMpID0+IHtcbiAgICAgIGlmICghYWNjW21ldHJpYy5uYW1lXSkge1xuICAgICAgICBhY2NbbWV0cmljLm5hbWVdID0gW11cbiAgICAgIH1cbiAgICAgIGFjY1ttZXRyaWMubmFtZV0ucHVzaChtZXRyaWMudmFsdWUpXG4gICAgICByZXR1cm4gYWNjXG4gICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyW10+KVxuXG4gICAgLy8gQ2FsY3VsYXRlIHN0YXRpc3RpY3MgZm9yIGVhY2ggbWV0cmljXG4gICAgT2JqZWN0LmVudHJpZXMoZ3JvdXBlZCkuZm9yRWFjaCgoW25hbWUsIHZhbHVlc10pID0+IHtcbiAgICAgIGNvbnN0IHNvcnRlZCA9IHZhbHVlcy5zb3J0KChhLCBiKSA9PiBhIC0gYilcbiAgICAgIGNvbnN0IGNvdW50ID0gdmFsdWVzLmxlbmd0aFxuICAgICAgY29uc3Qgc3VtID0gdmFsdWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApXG4gICAgICBcbiAgICAgIHN1bW1hcnlbbmFtZV0gPSB7XG4gICAgICAgIGNvdW50LFxuICAgICAgICBhdmVyYWdlOiBzdW0gLyBjb3VudCxcbiAgICAgICAgbWluOiBzb3J0ZWRbMF0sXG4gICAgICAgIG1heDogc29ydGVkW3NvcnRlZC5sZW5ndGggLSAxXSxcbiAgICAgICAgcDk1OiBzb3J0ZWRbTWF0aC5mbG9vcihzb3J0ZWQubGVuZ3RoICogMC45NSldXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiBzdW1tYXJ5XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgbWV0cmljIHRvIG1vbml0b3Jpbmcgc2VydmljZVxuICAgKi9cbiAgcHJpdmF0ZSBzZW5kVG9Nb25pdG9yaW5nKG1ldHJpYzogUGVyZm9ybWFuY2VNZXRyaWMpOiB2b2lkIHtcbiAgICAvLyBTZW5kIHRvIG1vbml0b3Jpbmcgc2VydmljZSAoZS5nLiwgRGF0YURvZywgTmV3IFJlbGljKVxuICAgIGlmICh0eXBlb2YgZmV0Y2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmZXRjaCgnL2FwaS9tb25pdG9yaW5nL21ldHJpY3MnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXRyaWMgfSlcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2VuZCBwZXJmb3JtYW5jZSBtZXRyaWM6JywgZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgcGVyZm9ybWFuY2UgdGhyZXNob2xkcyBhbmQgYWxlcnRzXG4gICAqL1xuICBwcml2YXRlIGNoZWNrUGVyZm9ybWFuY2VUaHJlc2hvbGRzKG1ldHJpYzogUGVyZm9ybWFuY2VNZXRyaWMpOiB2b2lkIHtcbiAgICBjb25zdCB0aHJlc2hvbGRzID0ge1xuICAgICAgJ2FwaV9yZXNwb25zZV90aW1lJzogNTAwMCwgLy8gNSBzZWNvbmRzXG4gICAgICAnY2hlY2tvdXRfc2Vzc2lvbl9jcmVhdGlvbic6IDEwMDAwLCAvLyAxMCBzZWNvbmRzXG4gICAgICAnc3RyaXBlX3JlZGlyZWN0JzogMzAwMCwgLy8gMyBzZWNvbmRzXG4gICAgICAnY2FydF9vcGVyYXRpb24nOiAxMDAwLCAvLyAxIHNlY29uZFxuICAgICAgJ3BhZ2VfbG9hZCc6IDMwMDAgLy8gMyBzZWNvbmRzXG4gICAgfVxuXG4gICAgY29uc3QgdGhyZXNob2xkID0gdGhyZXNob2xkc1ttZXRyaWMubmFtZSBhcyBrZXlvZiB0eXBlb2YgdGhyZXNob2xkc11cbiAgICBcbiAgICBpZiAodGhyZXNob2xkICYmIG1ldHJpYy52YWx1ZSA+IHRocmVzaG9sZCkge1xuICAgICAgZXJyb3JMb2dnZXIud2FybmluZygndWknLCBgUGVyZm9ybWFuY2UgdGhyZXNob2xkIGV4Y2VlZGVkOiAke21ldHJpYy5uYW1lfSB0b29rICR7bWV0cmljLnZhbHVlfW1zICh0aHJlc2hvbGQ6ICR7dGhyZXNob2xkfW1zKWAsIHVuZGVmaW5lZCwge1xuICAgICAgICBtZXRyaWM6IG1ldHJpYy5uYW1lLFxuICAgICAgICB2YWx1ZTogbWV0cmljLnZhbHVlLFxuICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgIHRhZ3M6IG1ldHJpYy50YWdzXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBIRUFMVEggTU9OSVRPUklOR1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbGFzcyBIZWFsdGhNb25pdG9yIHtcbiAgcHJpdmF0ZSBjaGVja3M6IEhlYWx0aENoZWNrW10gPSBbXVxuICBwcml2YXRlIG1heENoZWNrcyA9IDEwMFxuXG4gIC8qKlxuICAgKiBSZWNvcmRzIGEgaGVhbHRoIGNoZWNrIHJlc3VsdFxuICAgKi9cbiAgcmVjb3JkSGVhbHRoQ2hlY2soY2hlY2s6IE9taXQ8SGVhbHRoQ2hlY2ssICd0aW1lc3RhbXAnPik6IHZvaWQge1xuICAgIGNvbnN0IGhlYWx0aENoZWNrOiBIZWFsdGhDaGVjayA9IHtcbiAgICAgIC4uLmNoZWNrLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrcy5wdXNoKGhlYWx0aENoZWNrKVxuICAgIGlmICh0aGlzLmNoZWNrcy5sZW5ndGggPiB0aGlzLm1heENoZWNrcykge1xuICAgICAgdGhpcy5jaGVja3Muc2hpZnQoKVxuICAgIH1cblxuICAgIC8vIEFsZXJ0IG9uIHVuaGVhbHRoeSBzZXJ2aWNlc1xuICAgIGlmIChjaGVjay5zdGF0dXMgPT09ICd1bmhlYWx0aHknKSB7XG4gICAgICBlcnJvckxvZ2dlci5lcnJvcignYXBpJywgYFNlcnZpY2UgdW5oZWFsdGh5OiAke2NoZWNrLnNlcnZpY2V9YCwgdW5kZWZpbmVkLCB7XG4gICAgICAgIHNlcnZpY2U6IGNoZWNrLnNlcnZpY2UsXG4gICAgICAgIGVycm9yOiBjaGVjay5lcnJvcixcbiAgICAgICAgcmVzcG9uc2VUaW1lOiBjaGVjay5yZXNwb25zZVRpbWVcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgaGVhbHRoIGNoZWNrIHJlc3VsdHNcbiAgICovXG4gIGdldEhlYWx0aENoZWNrcyhzZXJ2aWNlPzogc3RyaW5nLCBsaW1pdDogbnVtYmVyID0gNTApOiBIZWFsdGhDaGVja1tdIHtcbiAgICBsZXQgZmlsdGVyZWQgPSB0aGlzLmNoZWNrc1xuICAgIFxuICAgIGlmIChzZXJ2aWNlKSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihjID0+IGMuc2VydmljZSA9PT0gc2VydmljZSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZpbHRlcmVkLnNsaWNlKC1saW1pdClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG92ZXJhbGwgc3lzdGVtIGhlYWx0aFxuICAgKi9cbiAgZ2V0U3lzdGVtSGVhbHRoKCk6IHtcbiAgICBzdGF0dXM6ICdoZWFsdGh5JyB8ICdkZWdyYWRlZCcgfCAndW5oZWFsdGh5J1xuICAgIHNlcnZpY2VzOiBSZWNvcmQ8c3RyaW5nLCB7XG4gICAgICBzdGF0dXM6ICdoZWFsdGh5JyB8ICdkZWdyYWRlZCcgfCAndW5oZWFsdGh5J1xuICAgICAgbGFzdENoZWNrOiBzdHJpbmdcbiAgICAgIHVwdGltZTogbnVtYmVyXG4gICAgfT5cbiAgfSB7XG4gICAgY29uc3Qgc2VydmljZXM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgIFxuICAgIC8vIEdldCBsYXRlc3QgY2hlY2sgZm9yIGVhY2ggc2VydmljZVxuICAgIGNvbnN0IGxhdGVzdENoZWNrcyA9IHRoaXMuY2hlY2tzLnJlZHVjZSgoYWNjLCBjaGVjaykgPT4ge1xuICAgICAgaWYgKCFhY2NbY2hlY2suc2VydmljZV0gfHwgY2hlY2sudGltZXN0YW1wID4gYWNjW2NoZWNrLnNlcnZpY2VdLnRpbWVzdGFtcCkge1xuICAgICAgICBhY2NbY2hlY2suc2VydmljZV0gPSBjaGVja1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFjY1xuICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIEhlYWx0aENoZWNrPilcblxuICAgIC8vIENhbGN1bGF0ZSBzZXJ2aWNlIGhlYWx0aFxuICAgIE9iamVjdC5lbnRyaWVzKGxhdGVzdENoZWNrcykuZm9yRWFjaCgoW3NlcnZpY2UsIGNoZWNrXSkgPT4ge1xuICAgICAgY29uc3Qgc2VydmljZUNoZWNrcyA9IHRoaXMuY2hlY2tzLmZpbHRlcihjID0+IGMuc2VydmljZSA9PT0gc2VydmljZSlcbiAgICAgIGNvbnN0IGhlYWx0aHlDaGVja3MgPSBzZXJ2aWNlQ2hlY2tzLmZpbHRlcihjID0+IGMuc3RhdHVzID09PSAnaGVhbHRoeScpLmxlbmd0aFxuICAgICAgY29uc3QgdXB0aW1lID0gc2VydmljZUNoZWNrcy5sZW5ndGggPiAwID8gKGhlYWx0aHlDaGVja3MgLyBzZXJ2aWNlQ2hlY2tzLmxlbmd0aCkgKiAxMDAgOiAwXG5cbiAgICAgIHNlcnZpY2VzW3NlcnZpY2VdID0ge1xuICAgICAgICBzdGF0dXM6IGNoZWNrLnN0YXR1cyxcbiAgICAgICAgbGFzdENoZWNrOiBjaGVjay50aW1lc3RhbXAsXG4gICAgICAgIHVwdGltZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBEZXRlcm1pbmUgb3ZlcmFsbCBzeXN0ZW0gc3RhdHVzXG4gICAgY29uc3Qgc2VydmljZVN0YXR1c2VzID0gT2JqZWN0LnZhbHVlcyhzZXJ2aWNlcykubWFwKHMgPT4gcy5zdGF0dXMpXG4gICAgY29uc3Qgb3ZlcmFsbFN0YXR1cyA9IHNlcnZpY2VTdGF0dXNlcy5pbmNsdWRlcygndW5oZWFsdGh5JykgPyAndW5oZWFsdGh5JyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgc2VydmljZVN0YXR1c2VzLmluY2x1ZGVzKCdkZWdyYWRlZCcpID8gJ2RlZ3JhZGVkJyA6ICdoZWFsdGh5J1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogb3ZlcmFsbFN0YXR1cyxcbiAgICAgIHNlcnZpY2VzXG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEJVU0lORVNTIE1FVFJJQ1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY2xhc3MgQnVzaW5lc3NNZXRyaWNzTW9uaXRvciB7XG4gIHByaXZhdGUgbWV0cmljczogQnVzaW5lc3NNZXRyaWNbXSA9IFtdXG4gIHByaXZhdGUgbWF4TWV0cmljcyA9IDEwMDBcblxuICAvKipcbiAgICogUmVjb3JkcyBhIGJ1c2luZXNzIG1ldHJpY1xuICAgKi9cbiAgcmVjb3JkTWV0cmljKG1ldHJpYzogT21pdDxCdXNpbmVzc01ldHJpYywgJ3RpbWVzdGFtcCc+KTogdm9pZCB7XG4gICAgaWYgKCFpc0ZlYXR1cmVFbmFibGVkKCdhbmFseXRpY3MnKSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgY29uc3QgYnVzaW5lc3NNZXRyaWM6IEJ1c2luZXNzTWV0cmljID0ge1xuICAgICAgLi4ubWV0cmljLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9XG5cbiAgICB0aGlzLm1ldHJpY3MucHVzaChidXNpbmVzc01ldHJpYylcbiAgICBpZiAodGhpcy5tZXRyaWNzLmxlbmd0aCA+IHRoaXMubWF4TWV0cmljcykge1xuICAgICAgdGhpcy5tZXRyaWNzLnNoaWZ0KClcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRvIGFuYWx5dGljc1xuICAgIHRoaXMuc2VuZFRvQW5hbHl0aWNzKGJ1c2luZXNzTWV0cmljKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYnVzaW5lc3MgbWV0cmljc1xuICAgKi9cbiAgZ2V0TWV0cmljcyhuYW1lPzogc3RyaW5nLCB0aW1lUmFuZ2U/OiB7IHN0YXJ0OiBzdHJpbmc7IGVuZDogc3RyaW5nIH0pOiBCdXNpbmVzc01ldHJpY1tdIHtcbiAgICBsZXQgZmlsdGVyZWQgPSB0aGlzLm1ldHJpY3NcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihtID0+IG0ubmFtZSA9PT0gbmFtZSlcbiAgICB9XG5cbiAgICBpZiAodGltZVJhbmdlKSB7XG4gICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcihtID0+IFxuICAgICAgICBtLnRpbWVzdGFtcCA+PSB0aW1lUmFuZ2Uuc3RhcnQgJiYgbS50aW1lc3RhbXAgPD0gdGltZVJhbmdlLmVuZFxuICAgICAgKVxuICAgIH1cblxuICAgIHJldHVybiBmaWx0ZXJlZFxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgcmV2ZW51ZSBtZXRyaWNzXG4gICAqL1xuICBnZXRSZXZlbnVlTWV0cmljcygpOiB7XG4gICAgdG90YWxSZXZlbnVlOiBudW1iZXJcbiAgICBhdmVyYWdlT3JkZXJWYWx1ZTogbnVtYmVyXG4gICAgY29udmVyc2lvblJhdGU6IG51bWJlclxuICAgIHRvcFByb2R1Y3RzOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgcmV2ZW51ZTogbnVtYmVyOyBvcmRlcnM6IG51bWJlciB9PlxuICB9IHtcbiAgICBjb25zdCByZXZlbnVlTWV0cmljcyA9IHRoaXMubWV0cmljcy5maWx0ZXIobSA9PiBtLm5hbWUgPT09ICdyZXZlbnVlJylcbiAgICBjb25zdCBvcmRlck1ldHJpY3MgPSB0aGlzLm1ldHJpY3MuZmlsdGVyKG0gPT4gbS5uYW1lID09PSAnb3JkZXJfY29tcGxldGVkJylcbiAgICBjb25zdCBzZXNzaW9uTWV0cmljcyA9IHRoaXMubWV0cmljcy5maWx0ZXIobSA9PiBtLm5hbWUgPT09ICdzZXNzaW9uX3N0YXJ0ZWQnKVxuXG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gcmV2ZW51ZU1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0udmFsdWUsIDApXG4gICAgY29uc3QgdG90YWxPcmRlcnMgPSBvcmRlck1ldHJpY3MubGVuZ3RoXG4gICAgY29uc3QgdG90YWxTZXNzaW9ucyA9IHNlc3Npb25NZXRyaWNzLmxlbmd0aFxuXG4gICAgY29uc3QgYXZlcmFnZU9yZGVyVmFsdWUgPSB0b3RhbE9yZGVycyA+IDAgPyB0b3RhbFJldmVudWUgLyB0b3RhbE9yZGVycyA6IDBcbiAgICBjb25zdCBjb252ZXJzaW9uUmF0ZSA9IHRvdGFsU2Vzc2lvbnMgPiAwID8gKHRvdGFsT3JkZXJzIC8gdG90YWxTZXNzaW9ucykgKiAxMDAgOiAwXG5cbiAgICAvLyBDYWxjdWxhdGUgdG9wIHByb2R1Y3RzXG4gICAgY29uc3QgcHJvZHVjdFJldmVudWU6IFJlY29yZDxzdHJpbmcsIHsgcmV2ZW51ZTogbnVtYmVyOyBvcmRlcnM6IG51bWJlciB9PiA9IHt9XG4gICAgXG4gICAgb3JkZXJNZXRyaWNzLmZvckVhY2gobWV0cmljID0+IHtcbiAgICAgIGNvbnN0IHByb2R1Y3ROYW1lID0gbWV0cmljLmRpbWVuc2lvbnM/LnByb2R1Y3RfbmFtZSB8fCAnVW5rbm93bidcbiAgICAgIGNvbnN0IHJldmVudWUgPSBtZXRyaWMudmFsdWUgfHwgMFxuICAgICAgXG4gICAgICBpZiAoIXByb2R1Y3RSZXZlbnVlW3Byb2R1Y3ROYW1lXSkge1xuICAgICAgICBwcm9kdWN0UmV2ZW51ZVtwcm9kdWN0TmFtZV0gPSB7IHJldmVudWU6IDAsIG9yZGVyczogMCB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHByb2R1Y3RSZXZlbnVlW3Byb2R1Y3ROYW1lXS5yZXZlbnVlICs9IHJldmVudWVcbiAgICAgIHByb2R1Y3RSZXZlbnVlW3Byb2R1Y3ROYW1lXS5vcmRlcnMgKz0gMVxuICAgIH0pXG5cbiAgICBjb25zdCB0b3BQcm9kdWN0cyA9IE9iamVjdC5lbnRyaWVzKHByb2R1Y3RSZXZlbnVlKVxuICAgICAgLm1hcCgoW25hbWUsIGRhdGFdKSA9PiAoeyBuYW1lLCAuLi5kYXRhIH0pKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IGIucmV2ZW51ZSAtIGEucmV2ZW51ZSlcbiAgICAgIC5zbGljZSgwLCAxMClcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbFJldmVudWUsXG4gICAgICBhdmVyYWdlT3JkZXJWYWx1ZSxcbiAgICAgIGNvbnZlcnNpb25SYXRlLFxuICAgICAgdG9wUHJvZHVjdHNcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2VuZHMgbWV0cmljIHRvIGFuYWx5dGljc1xuICAgKi9cbiAgcHJpdmF0ZSBzZW5kVG9BbmFseXRpY3MobWV0cmljOiBCdXNpbmVzc01ldHJpYyk6IHZvaWQge1xuICAgIC8vIFNlbmQgdG8gYW5hbHl0aWNzIHNlcnZpY2VcbiAgICBpZiAodHlwZW9mIGZldGNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZmV0Y2goJy9hcGkvYW5hbHl0aWNzL2J1c2luZXNzLW1ldHJpY3MnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBtZXRyaWMgfSlcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gc2VuZCBidXNpbmVzcyBtZXRyaWM6JywgZXJyb3IpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBTSU5HTEVUT04gSU5TVEFOQ0VTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBwYXltZW50TW9uaXRvciA9IG5ldyBQYXltZW50TW9uaXRvcigpXG5leHBvcnQgY29uc3QgcGVyZm9ybWFuY2VNb25pdG9yID0gbmV3IFBlcmZvcm1hbmNlTW9uaXRvcigpXG5leHBvcnQgY29uc3QgaGVhbHRoTW9uaXRvciA9IG5ldyBIZWFsdGhNb25pdG9yKClcbmV4cG9ydCBjb25zdCBidXNpbmVzc01ldHJpY3MgPSBuZXcgQnVzaW5lc3NNZXRyaWNzTW9uaXRvcigpXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIENPTlZFTklFTkNFIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFRyYWNrcyBhIHBheW1lbnQgZXZlbnRcbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNrUGF5bWVudCA9IChldmVudDogT21pdDxQYXltZW50RXZlbnQsICd0aW1lc3RhbXAnPik6IHZvaWQgPT4ge1xuICBwYXltZW50TW9uaXRvci50cmFja1BheW1lbnRFdmVudChldmVudClcbn1cblxuLyoqXG4gKiBSZWNvcmRzIGEgcGVyZm9ybWFuY2UgbWV0cmljXG4gKi9cbmV4cG9ydCBjb25zdCByZWNvcmRQZXJmb3JtYW5jZSA9IChtZXRyaWM6IE9taXQ8UGVyZm9ybWFuY2VNZXRyaWMsICd0aW1lc3RhbXAnPik6IHZvaWQgPT4ge1xuICBwZXJmb3JtYW5jZU1vbml0b3IucmVjb3JkTWV0cmljKG1ldHJpYylcbn1cblxuLyoqXG4gKiBNZWFzdXJlcyBmdW5jdGlvbiBleGVjdXRpb24gdGltZVxuICovXG5leHBvcnQgY29uc3QgbWVhc3VyZVRpbWUgPSA8VD4oXG4gIG5hbWU6IHN0cmluZyxcbiAgZm46ICgpID0+IFQgfCBQcm9taXNlPFQ+LFxuICB0YWdzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuKTogVCB8IFByb21pc2U8VD4gPT4ge1xuICByZXR1cm4gcGVyZm9ybWFuY2VNb25pdG9yLm1lYXN1cmVFeGVjdXRpb25UaW1lKG5hbWUsIGZuLCB0YWdzKVxufVxuXG4vKipcbiAqIFJlY29yZHMgYSBoZWFsdGggY2hlY2tcbiAqL1xuZXhwb3J0IGNvbnN0IHJlY29yZEhlYWx0aCA9IChjaGVjazogT21pdDxIZWFsdGhDaGVjaywgJ3RpbWVzdGFtcCc+KTogdm9pZCA9PiB7XG4gIGhlYWx0aE1vbml0b3IucmVjb3JkSGVhbHRoQ2hlY2soY2hlY2spXG59XG5cbi8qKlxuICogUmVjb3JkcyBhIGJ1c2luZXNzIG1ldHJpY1xuICovXG5leHBvcnQgY29uc3QgcmVjb3JkQnVzaW5lc3MgPSAobWV0cmljOiBPbWl0PEJ1c2luZXNzTWV0cmljLCAndGltZXN0YW1wJz4pOiB2b2lkID0+IHtcbiAgYnVzaW5lc3NNZXRyaWNzLnJlY29yZE1ldHJpYyhtZXRyaWMpXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIE1PTklUT1JJTkcgREFTSEJPQVJEIERBVEFcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBHZXRzIGNvbXByZWhlbnNpdmUgbW9uaXRvcmluZyBkYXRhIGZvciBkYXNoYm9hcmRcbiAqL1xuZXhwb3J0IGNvbnN0IGdldE1vbml0b3JpbmdEYXNoYm9hcmQgPSAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZW52aXJvbm1lbnQ6IGdldENvbmZpZygpLFxuICAgIHBheW1lbnQ6IHBheW1lbnRNb25pdG9yLmdldFBheW1lbnRNZXRyaWNzKCksXG4gICAgcGVyZm9ybWFuY2U6IHBlcmZvcm1hbmNlTW9uaXRvci5nZXRQZXJmb3JtYW5jZVN1bW1hcnkoKSxcbiAgICBoZWFsdGg6IGhlYWx0aE1vbml0b3IuZ2V0U3lzdGVtSGVhbHRoKCksXG4gICAgYnVzaW5lc3M6IGJ1c2luZXNzTWV0cmljcy5nZXRSZXZlbnVlTWV0cmljcygpLFxuICAgIGVycm9yczogZXJyb3JMb2dnZXIuZ2V0TWV0cmljcygpXG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gSU5JVElBTElaQVRJT05cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBtb25pdG9yaW5nIHN5c3RlbVxuICovXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZU1vbml0b3JpbmcgPSAoKTogdm9pZCA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IGdldENvbmZpZygpXG4gIFxuICBpZiAoY29uZmlnLmlzUHJvZHVjdGlvbikge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIEluaXRpYWxpemluZyBwcm9kdWN0aW9uIG1vbml0b3JpbmcuLi4nKVxuICAgIFxuICAgIC8vIFNldCB1cCBwZXJpb2RpYyBoZWFsdGggY2hlY2tzXG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgLy8gQ2hlY2sgU3RyaXBlIGNvbm5lY3Rpdml0eVxuICAgICAgZmV0Y2goJy9hcGkvaGVhbHRoJylcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHJlY29yZEhlYWx0aCh7XG4gICAgICAgICAgICBzZXJ2aWNlOiAnYXBpJyxcbiAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uub2sgPyAnaGVhbHRoeScgOiAndW5oZWFsdGh5JyxcbiAgICAgICAgICAgIHJlc3BvbnNlVGltZTogcGVyZm9ybWFuY2Uubm93KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIHJlY29yZEhlYWx0aCh7XG4gICAgICAgICAgICBzZXJ2aWNlOiAnYXBpJyxcbiAgICAgICAgICAgIHN0YXR1czogJ3VuaGVhbHRoeScsXG4gICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSwgNjAwMDApIC8vIEV2ZXJ5IG1pbnV0ZVxuXG4gICAgY29uc29sZS5sb2coJ+KchSBQcm9kdWN0aW9uIG1vbml0b3JpbmcgaW5pdGlhbGl6ZWQnKVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFRZUEUgREVDTEFSQVRJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgZ3RhZz86ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZFxuICB9XG59Il0sIm5hbWVzIjpbImdldENvbmZpZyIsImlzRmVhdHVyZUVuYWJsZWQiLCJlcnJvckxvZ2dlciIsIlBheW1lbnRNb25pdG9yIiwidHJhY2tQYXltZW50RXZlbnQiLCJldmVudCIsInBheW1lbnRFdmVudCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImV2ZW50cyIsInB1c2giLCJsZW5ndGgiLCJtYXhFdmVudHMiLCJzaGlmdCIsInNlbmRUb0FuYWx5dGljcyIsInR5cGUiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsInVuZGVmaW5lZCIsInNlc3Npb25JZCIsIm9yZGVySWQiLCJhbW91bnQiLCJlcnJvckNvZGUiLCJnZXRQYXltZW50RXZlbnRzIiwibGltaXQiLCJzbGljZSIsImdldFBheW1lbnRNZXRyaWNzIiwidG90YWwiLCJzdWNjZXNzZnVsIiwiZmlsdGVyIiwiZSIsImZhaWxlZCIsImNhbmNlbGxlZCIsInN1Y2Nlc3NSYXRlIiwiYW1vdW50cyIsIm1hcCIsImF2ZXJhZ2VBbW91bnQiLCJyZWR1Y2UiLCJzdW0iLCJ0b3RhbFBheW1lbnRzIiwic3VjY2Vzc2Z1bFBheW1lbnRzIiwiZmFpbGVkUGF5bWVudHMiLCJjYW5jZWxsZWRQYXltZW50cyIsIndpbmRvdyIsImd0YWciLCJldmVudF9jYXRlZ29yeSIsImV2ZW50X2xhYmVsIiwidmFsdWUiLCJjdXN0b21fbWFwIiwib3JkZXJfaWQiLCJwYXltZW50X21ldGhvZCIsInBheW1lbnRNZXRob2QiLCJjdXJyZW5jeSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2F0Y2giLCJjb25zb2xlIiwid2FybiIsIlBlcmZvcm1hbmNlTW9uaXRvciIsInJlY29yZE1ldHJpYyIsIm1ldHJpYyIsInBlcmZvcm1hbmNlTWV0cmljIiwibWV0cmljcyIsIm1heE1ldHJpY3MiLCJzZW5kVG9Nb25pdG9yaW5nIiwiY2hlY2tQZXJmb3JtYW5jZVRocmVzaG9sZHMiLCJtZWFzdXJlRXhlY3V0aW9uVGltZSIsIm5hbWUiLCJmbiIsInRhZ3MiLCJzdGFydCIsInBlcmZvcm1hbmNlIiwibm93IiwiZmluaXNoIiwicmVzdWx0IiwiZHVyYXRpb24iLCJ1bml0IiwiUHJvbWlzZSIsInRoZW4iLCJnZXRNZXRyaWNzIiwiZmlsdGVyZWQiLCJtIiwiZ2V0UGVyZm9ybWFuY2VTdW1tYXJ5Iiwic3VtbWFyeSIsImdyb3VwZWQiLCJhY2MiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsInZhbHVlcyIsInNvcnRlZCIsInNvcnQiLCJhIiwiYiIsImNvdW50IiwiYXZlcmFnZSIsIm1pbiIsIm1heCIsInA5NSIsIk1hdGgiLCJmbG9vciIsInRocmVzaG9sZHMiLCJ0aHJlc2hvbGQiLCJ3YXJuaW5nIiwiSGVhbHRoTW9uaXRvciIsInJlY29yZEhlYWx0aENoZWNrIiwiY2hlY2siLCJoZWFsdGhDaGVjayIsImNoZWNrcyIsIm1heENoZWNrcyIsInN0YXR1cyIsInNlcnZpY2UiLCJyZXNwb25zZVRpbWUiLCJnZXRIZWFsdGhDaGVja3MiLCJjIiwiZ2V0U3lzdGVtSGVhbHRoIiwic2VydmljZXMiLCJsYXRlc3RDaGVja3MiLCJzZXJ2aWNlQ2hlY2tzIiwiaGVhbHRoeUNoZWNrcyIsInVwdGltZSIsImxhc3RDaGVjayIsInNlcnZpY2VTdGF0dXNlcyIsInMiLCJvdmVyYWxsU3RhdHVzIiwiaW5jbHVkZXMiLCJCdXNpbmVzc01ldHJpY3NNb25pdG9yIiwiYnVzaW5lc3NNZXRyaWMiLCJ0aW1lUmFuZ2UiLCJlbmQiLCJnZXRSZXZlbnVlTWV0cmljcyIsInJldmVudWVNZXRyaWNzIiwib3JkZXJNZXRyaWNzIiwic2Vzc2lvbk1ldHJpY3MiLCJ0b3RhbFJldmVudWUiLCJ0b3RhbE9yZGVycyIsInRvdGFsU2Vzc2lvbnMiLCJhdmVyYWdlT3JkZXJWYWx1ZSIsImNvbnZlcnNpb25SYXRlIiwicHJvZHVjdFJldmVudWUiLCJwcm9kdWN0TmFtZSIsImRpbWVuc2lvbnMiLCJwcm9kdWN0X25hbWUiLCJyZXZlbnVlIiwib3JkZXJzIiwidG9wUHJvZHVjdHMiLCJkYXRhIiwicGF5bWVudE1vbml0b3IiLCJwZXJmb3JtYW5jZU1vbml0b3IiLCJoZWFsdGhNb25pdG9yIiwiYnVzaW5lc3NNZXRyaWNzIiwidHJhY2tQYXltZW50IiwicmVjb3JkUGVyZm9ybWFuY2UiLCJtZWFzdXJlVGltZSIsInJlY29yZEhlYWx0aCIsInJlY29yZEJ1c2luZXNzIiwiZ2V0TW9uaXRvcmluZ0Rhc2hib2FyZCIsImVudmlyb25tZW50IiwicGF5bWVudCIsImhlYWx0aCIsImJ1c2luZXNzIiwiZXJyb3JzIiwiaW5pdGlhbGl6ZU1vbml0b3JpbmciLCJjb25maWciLCJpc1Byb2R1Y3Rpb24iLCJsb2ciLCJzZXRJbnRlcnZhbCIsInJlc3BvbnNlIiwib2siLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/monitoring.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/stripe.ts":
/*!***************************!*\
  !*** ./src/lib/stripe.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getStripe: () => (/* binding */ getStripe),\n/* harmony export */   getStripeConfig: () => (/* binding */ getStripeConfig),\n/* harmony export */   getStripeServer: () => (/* binding */ getStripeServer),\n/* harmony export */   testStripeConnection: () => (/* binding */ testStripeConnection)\n/* harmony export */ });\n/* harmony import */ var _stripe_stripe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @stripe/stripe-js */ \"(rsc)/./node_modules/@stripe/stripe-js/lib/index.mjs\");\n/* harmony import */ var stripe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! stripe */ \"(rsc)/./node_modules/stripe/esm/stripe.esm.node.js\");\n\n\n// Environment validation\nconst validateEnvironment = ()=>{\n    const publishableKey = \"pk_test_51R9pLT2KYi1EVCMzHc8vDqSNTMpgfL5kMzX4qP68gdQp53ioubKm4dquVENb7YByxZ06bxOJhjzdnVLD2vo5wBbh00O0ngluNA\";\n    const secretKey = process.env.STRIPE_SECRET_KEY;\n    if (true) {\n        // Server-side validation\n        if (!secretKey) {\n            throw new Error(\"STRIPE_SECRET_KEY is required but not set in environment variables\");\n        }\n        if (!secretKey.startsWith(\"sk_\")) {\n            throw new Error('STRIPE_SECRET_KEY must start with \"sk_\"');\n        }\n    }\n    // Client-side validation\n    if (!publishableKey) {\n        throw new Error(\"NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY is required but not set in environment variables\");\n    }\n    if (!publishableKey.startsWith(\"pk_\")) {\n        throw new Error('NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY must start with \"pk_\"');\n    }\n    // Environment consistency check\n    const isTestMode = publishableKey.includes(\"test\");\n    const isSecretTestMode = secretKey?.includes(\"test\") ?? true;\n    if (isTestMode !== isSecretTestMode) {\n        console.warn(\"Warning: Stripe keys environment mismatch (test vs live)\");\n    }\n    return {\n        publishableKey,\n        secretKey,\n        isTestMode\n    };\n};\n// Client-side Stripe instance\nlet stripePromise;\nconst getStripe = ()=>{\n    if (!stripePromise) {\n        const { publishableKey } = validateEnvironment();\n        stripePromise = (0,_stripe_stripe_js__WEBPACK_IMPORTED_MODULE_0__.loadStripe)(publishableKey);\n    }\n    return stripePromise;\n};\n// Server-side Stripe instance\nlet stripeServer = null;\nconst getStripeServer = ()=>{\n    if (!stripeServer) {\n        const { secretKey } = validateEnvironment();\n        if (!secretKey) {\n            throw new Error(\"Cannot initialize server-side Stripe without STRIPE_SECRET_KEY\");\n        }\n        stripeServer = new stripe__WEBPACK_IMPORTED_MODULE_1__[\"default\"](secretKey, {\n            apiVersion: \"2024-06-20\",\n            typescript: true\n        });\n    }\n    return stripeServer;\n};\n// Configuration utilities\nconst getStripeConfig = ()=>{\n    const { publishableKey, secretKey, isTestMode } = validateEnvironment();\n    return {\n        publishableKey,\n        secretKey: secretKey ? \"***\" + secretKey.slice(-4) : undefined,\n        isTestMode,\n        environment: \"development\",\n        apiVersion: \"2024-06-20\"\n    };\n};\n// Test connection utility\nconst testStripeConnection = async ()=>{\n    try {\n        if (false) {} else {\n            // Server-side test\n            const stripe = getStripeServer();\n            await stripe.customers.list({\n                limit: 1\n            });\n            return true;\n        }\n    } catch (error) {\n        console.error(\"Stripe connection test failed:\", error);\n        return false;\n    }\n};\n// Legacy export for backward compatibility\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (getStripe);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N0cmlwZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXNEO0FBQ3JCO0FBRWpDLHlCQUF5QjtBQUN6QixNQUFNRSxzQkFBc0I7SUFDMUIsTUFBTUMsaUJBQWlCQyw2R0FBOEM7SUFDckUsTUFBTUcsWUFBWUgsUUFBUUMsR0FBRyxDQUFDRyxpQkFBaUI7SUFFL0MsSUFBSSxJQUFrQixFQUFhO1FBQ2pDLHlCQUF5QjtRQUN6QixJQUFJLENBQUNELFdBQVc7WUFDZCxNQUFNLElBQUlFLE1BQU07UUFDbEI7UUFDQSxJQUFJLENBQUNGLFVBQVVHLFVBQVUsQ0FBQyxRQUFRO1lBQ2hDLE1BQU0sSUFBSUQsTUFBTTtRQUNsQjtJQUNGO0lBRUEseUJBQXlCO0lBQ3pCLElBQUksQ0FBQ04sZ0JBQWdCO1FBQ25CLE1BQU0sSUFBSU0sTUFBTTtJQUNsQjtJQUNBLElBQUksQ0FBQ04sZUFBZU8sVUFBVSxDQUFDLFFBQVE7UUFDckMsTUFBTSxJQUFJRCxNQUFNO0lBQ2xCO0lBRUEsZ0NBQWdDO0lBQ2hDLE1BQU1FLGFBQWFSLGVBQWVTLFFBQVEsQ0FBQztJQUMzQyxNQUFNQyxtQkFBbUJOLFdBQVdLLFNBQVMsV0FBVztJQUV4RCxJQUFJRCxlQUFlRSxrQkFBa0I7UUFDbkNDLFFBQVFDLElBQUksQ0FBQztJQUNmO0lBRUEsT0FBTztRQUNMWjtRQUNBSTtRQUNBSTtJQUNGO0FBQ0Y7QUFFQSw4QkFBOEI7QUFDOUIsSUFBSUs7QUFFRyxNQUFNQyxZQUFZO0lBQ3ZCLElBQUksQ0FBQ0QsZUFBZTtRQUNsQixNQUFNLEVBQUViLGNBQWMsRUFBRSxHQUFHRDtRQUMzQmMsZ0JBQWdCaEIsNkRBQVVBLENBQUNHO0lBQzdCO0lBQ0EsT0FBT2E7QUFDVCxFQUFDO0FBRUQsOEJBQThCO0FBQzlCLElBQUlFLGVBQW9DO0FBRWpDLE1BQU1DLGtCQUFrQjtJQUM3QixJQUFJLENBQUNELGNBQWM7UUFDakIsTUFBTSxFQUFFWCxTQUFTLEVBQUUsR0FBR0w7UUFFdEIsSUFBSSxDQUFDSyxXQUFXO1lBQ2QsTUFBTSxJQUFJRSxNQUFNO1FBQ2xCO1FBRUFTLGVBQWUsSUFBSWpCLDhDQUFZQSxDQUFDTSxXQUFXO1lBQ3pDYSxZQUFZO1lBQ1pDLFlBQVk7UUFDZDtJQUNGO0lBRUEsT0FBT0g7QUFDVCxFQUFDO0FBRUQsMEJBQTBCO0FBQ25CLE1BQU1JLGtCQUFrQjtJQUM3QixNQUFNLEVBQUVuQixjQUFjLEVBQUVJLFNBQVMsRUFBRUksVUFBVSxFQUFFLEdBQUdUO0lBRWxELE9BQU87UUFDTEM7UUFDQUksV0FBV0EsWUFBWSxRQUFRQSxVQUFVZ0IsS0FBSyxDQUFDLENBQUMsS0FBS0M7UUFDckRiO1FBQ0FjLGFBaEZKO1FBaUZJTCxZQUFZO0lBQ2Q7QUFDRixFQUFDO0FBRUQsMEJBQTBCO0FBQ25CLE1BQU1NLHVCQUF1QjtJQUNsQyxJQUFJO1FBQ0YsSUFBSSxLQUFrQixFQUFhLEVBSWxDLE1BQU07WUFDTCxtQkFBbUI7WUFDbkIsTUFBTUMsU0FBU1I7WUFDZixNQUFNUSxPQUFPQyxTQUFTLENBQUNDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFFO1lBQ3ZDLE9BQU87UUFDVDtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkakIsUUFBUWlCLEtBQUssQ0FBQyxrQ0FBa0NBO1FBQ2hELE9BQU87SUFDVDtBQUNGLEVBQUM7QUFFRCwyQ0FBMkM7QUFDM0MsaUVBQWVkLFNBQVNBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS10ZWNoLWdsYXNzZXMvLi9zcmMvbGliL3N0cmlwZS50cz83OThhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvYWRTdHJpcGUsIFN0cmlwZSB9IGZyb20gJ0BzdHJpcGUvc3RyaXBlLWpzJ1xuaW1wb3J0IFN0cmlwZVNlcnZlciBmcm9tICdzdHJpcGUnXG5cbi8vIEVudmlyb25tZW50IHZhbGlkYXRpb25cbmNvbnN0IHZhbGlkYXRlRW52aXJvbm1lbnQgPSAoKSA9PiB7XG4gIGNvbnN0IHB1Ymxpc2hhYmxlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWVxuICBjb25zdCBzZWNyZXRLZXkgPSBwcm9jZXNzLmVudi5TVFJJUEVfU0VDUkVUX0tFWVxuXG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIFNlcnZlci1zaWRlIHZhbGlkYXRpb25cbiAgICBpZiAoIXNlY3JldEtleSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTVFJJUEVfU0VDUkVUX0tFWSBpcyByZXF1aXJlZCBidXQgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKVxuICAgIH1cbiAgICBpZiAoIXNlY3JldEtleS5zdGFydHNXaXRoKCdza18nKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTVFJJUEVfU0VDUkVUX0tFWSBtdXN0IHN0YXJ0IHdpdGggXCJza19cIicpXG4gICAgfVxuICB9XG5cbiAgLy8gQ2xpZW50LXNpZGUgdmFsaWRhdGlvblxuICBpZiAoIXB1Ymxpc2hhYmxlS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdORVhUX1BVQkxJQ19TVFJJUEVfUFVCTElTSEFCTEVfS0VZIGlzIHJlcXVpcmVkIGJ1dCBub3Qgc2V0IGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpXG4gIH1cbiAgaWYgKCFwdWJsaXNoYWJsZUtleS5zdGFydHNXaXRoKCdwa18nKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSBtdXN0IHN0YXJ0IHdpdGggXCJwa19cIicpXG4gIH1cblxuICAvLyBFbnZpcm9ubWVudCBjb25zaXN0ZW5jeSBjaGVja1xuICBjb25zdCBpc1Rlc3RNb2RlID0gcHVibGlzaGFibGVLZXkuaW5jbHVkZXMoJ3Rlc3QnKVxuICBjb25zdCBpc1NlY3JldFRlc3RNb2RlID0gc2VjcmV0S2V5Py5pbmNsdWRlcygndGVzdCcpID8/IHRydWVcblxuICBpZiAoaXNUZXN0TW9kZSAhPT0gaXNTZWNyZXRUZXN0TW9kZSkge1xuICAgIGNvbnNvbGUud2FybignV2FybmluZzogU3RyaXBlIGtleXMgZW52aXJvbm1lbnQgbWlzbWF0Y2ggKHRlc3QgdnMgbGl2ZSknKVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwdWJsaXNoYWJsZUtleSxcbiAgICBzZWNyZXRLZXksXG4gICAgaXNUZXN0TW9kZVxuICB9XG59XG5cbi8vIENsaWVudC1zaWRlIFN0cmlwZSBpbnN0YW5jZVxubGV0IHN0cmlwZVByb21pc2U6IFByb21pc2U8U3RyaXBlIHwgbnVsbD5cblxuZXhwb3J0IGNvbnN0IGdldFN0cmlwZSA9ICgpOiBQcm9taXNlPFN0cmlwZSB8IG51bGw+ID0+IHtcbiAgaWYgKCFzdHJpcGVQcm9taXNlKSB7XG4gICAgY29uc3QgeyBwdWJsaXNoYWJsZUtleSB9ID0gdmFsaWRhdGVFbnZpcm9ubWVudCgpXG4gICAgc3RyaXBlUHJvbWlzZSA9IGxvYWRTdHJpcGUocHVibGlzaGFibGVLZXkpXG4gIH1cbiAgcmV0dXJuIHN0cmlwZVByb21pc2Vcbn1cblxuLy8gU2VydmVyLXNpZGUgU3RyaXBlIGluc3RhbmNlXG5sZXQgc3RyaXBlU2VydmVyOiBTdHJpcGVTZXJ2ZXIgfCBudWxsID0gbnVsbFxuXG5leHBvcnQgY29uc3QgZ2V0U3RyaXBlU2VydmVyID0gKCk6IFN0cmlwZVNlcnZlciA9PiB7XG4gIGlmICghc3RyaXBlU2VydmVyKSB7XG4gICAgY29uc3QgeyBzZWNyZXRLZXkgfSA9IHZhbGlkYXRlRW52aXJvbm1lbnQoKVxuICAgIFxuICAgIGlmICghc2VjcmV0S2V5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBpbml0aWFsaXplIHNlcnZlci1zaWRlIFN0cmlwZSB3aXRob3V0IFNUUklQRV9TRUNSRVRfS0VZJylcbiAgICB9XG5cbiAgICBzdHJpcGVTZXJ2ZXIgPSBuZXcgU3RyaXBlU2VydmVyKHNlY3JldEtleSwge1xuICAgICAgYXBpVmVyc2lvbjogJzIwMjQtMDYtMjAnLFxuICAgICAgdHlwZXNjcmlwdDogdHJ1ZSxcbiAgICB9KVxuICB9XG4gIFxuICByZXR1cm4gc3RyaXBlU2VydmVyXG59XG5cbi8vIENvbmZpZ3VyYXRpb24gdXRpbGl0aWVzXG5leHBvcnQgY29uc3QgZ2V0U3RyaXBlQ29uZmlnID0gKCkgPT4ge1xuICBjb25zdCB7IHB1Ymxpc2hhYmxlS2V5LCBzZWNyZXRLZXksIGlzVGVzdE1vZGUgfSA9IHZhbGlkYXRlRW52aXJvbm1lbnQoKVxuICBcbiAgcmV0dXJuIHtcbiAgICBwdWJsaXNoYWJsZUtleSxcbiAgICBzZWNyZXRLZXk6IHNlY3JldEtleSA/ICcqKionICsgc2VjcmV0S2V5LnNsaWNlKC00KSA6IHVuZGVmaW5lZCwgLy8gTWFza2VkIGZvciBsb2dnaW5nXG4gICAgaXNUZXN0TW9kZSxcbiAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYsXG4gICAgYXBpVmVyc2lvbjogJzIwMjQtMDYtMjAnIGFzIGNvbnN0XG4gIH1cbn1cblxuLy8gVGVzdCBjb25uZWN0aW9uIHV0aWxpdHlcbmV4cG9ydCBjb25zdCB0ZXN0U3RyaXBlQ29ubmVjdGlvbiA9IGFzeW5jICgpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIENsaWVudC1zaWRlIHRlc3RcbiAgICAgIGNvbnN0IHN0cmlwZSA9IGF3YWl0IGdldFN0cmlwZSgpXG4gICAgICByZXR1cm4gc3RyaXBlICE9PSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNlcnZlci1zaWRlIHRlc3RcbiAgICAgIGNvbnN0IHN0cmlwZSA9IGdldFN0cmlwZVNlcnZlcigpXG4gICAgICBhd2FpdCBzdHJpcGUuY3VzdG9tZXJzLmxpc3QoeyBsaW1pdDogMSB9KVxuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3RyaXBlIGNvbm5lY3Rpb24gdGVzdCBmYWlsZWQ6JywgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLy8gTGVnYWN5IGV4cG9ydCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IGRlZmF1bHQgZ2V0U3RyaXBlIl0sIm5hbWVzIjpbImxvYWRTdHJpcGUiLCJTdHJpcGVTZXJ2ZXIiLCJ2YWxpZGF0ZUVudmlyb25tZW50IiwicHVibGlzaGFibGVLZXkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1RSSVBFX1BVQkxJU0hBQkxFX0tFWSIsInNlY3JldEtleSIsIlNUUklQRV9TRUNSRVRfS0VZIiwiRXJyb3IiLCJzdGFydHNXaXRoIiwiaXNUZXN0TW9kZSIsImluY2x1ZGVzIiwiaXNTZWNyZXRUZXN0TW9kZSIsImNvbnNvbGUiLCJ3YXJuIiwic3RyaXBlUHJvbWlzZSIsImdldFN0cmlwZSIsInN0cmlwZVNlcnZlciIsImdldFN0cmlwZVNlcnZlciIsImFwaVZlcnNpb24iLCJ0eXBlc2NyaXB0IiwiZ2V0U3RyaXBlQ29uZmlnIiwic2xpY2UiLCJ1bmRlZmluZWQiLCJlbnZpcm9ubWVudCIsInRlc3RTdHJpcGVDb25uZWN0aW9uIiwic3RyaXBlIiwiY3VzdG9tZXJzIiwibGlzdCIsImxpbWl0IiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/stripe.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/stripe","vendor-chunks/next","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/qs","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/@stripe","vendor-chunks/object-inspect","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/hasown","vendor-chunks/get-intrinsic","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/call-bound"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fhealth%2Froute&page=%2Fapi%2Fhealth%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fhealth%2Froute.ts&appDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ftomaszgt%2FMytechglasses%2Fmy-tech-glasses&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();